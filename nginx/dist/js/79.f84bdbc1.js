"use strict";(self["webpackChunkfrontend_web"]=self["webpackChunkfrontend_web"]||[]).push([[79],{81578:function(e,t,l){l.d(t,{Z:function(){return F}});var s=l(73396),a=l(49242),u=l(87139);const i={key:0},o={key:0},n={key:1},r={key:0,class:"tab-box-sli"},d={style:{color:"#747474"}},g={key:0},m=(0,s._)("b",null,"General",-1),p=(0,s._)("b",null,"Request Headers",-1),w=(0,s._)("b",null,"Request Payload",-1),c={class:"tab-box-sli"},h={key:4,style:{color:"#d60000"}},b={key:0,style:{color:"#00AA7F"}},f={key:1,style:{color:"#d18d17"}},_={key:2,style:{color:"#ff0000"}},k={key:0,style:{color:"#00AA7F"}},y={key:1,style:{color:"#ff5500"}},W={key:0,style:{"margin-top":"10px",width:"100%","text-align":"center"}},B={class:"dialog-footer"};function v(e,t,l,v,z,D){const x=(0,s.up)("Editor"),U=(0,s.up)("el-tab-pane"),V=(0,s.up)("el-tag"),F=(0,s.up)("el-scrollbar"),C=(0,s.up)("el-collapse-item"),q=(0,s.up)("el-collapse"),$=(0,s.up)("el-tabs"),R=(0,s.up)("el-button"),j=(0,s.up)("el-option"),A=(0,s.up)("el-select"),I=(0,s.up)("el-form-item"),T=(0,s.up)("el-input"),L=(0,s.up)("el-form"),H=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)($,{"model-value":"rb",style:{"min-height":"300px"},type:"border-card",value:"rb",size:"mini"},{default:(0,s.w5)((()=>["api"==l.result.type?((0,s.wg)(),(0,s.j4)(U,{key:0,label:"响应体",name:"rb"},{default:(0,s.w5)((()=>[l.result.response_header?((0,s.wg)(),(0,s.iD)("div",i,[-1!=l.result.response_header["Content-Type"].search("application/json")?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(x,{readOnly:!0,modelValue:l.result.response_body,"onUpdate:modelValue":t[0]||(t[0]=e=>l.result.response_body=e),lang:"json",theme:"chrome"},null,8,["modelValue"])])):((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(x,{readOnly:!0,modelValue:l.result.response_body,"onUpdate:modelValue":t[1]||(t[1]=e=>l.result.response_body=e),lang:"html",theme:"chrome",height:"500px"},null,8,["modelValue"])]))])):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(U,{key:1,label:"响应头",name:"rh"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{height:"400px",onWheel:t[2]||(t[2]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[l.result.response_header?((0,s.wg)(),(0,s.iD)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.response_header,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(V,{style:{"margin-top":"3px"},type:"info"},{default:(0,s.w5)((()=>[(0,s._)("b",d,(0,u.zw)(t+" : "),1),(0,s._)("span",null,(0,u.zw)(e),1)])),_:2},1024)])))),256))])):(0,s.kq)("",!0)])),_:1})])),_:1})):(0,s.kq)("",!0),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(U,{key:2,label:"请求信息",name:"rq"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{height:"400px",onWheel:t[4]||(t[4]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[l.result.requests_body?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(q,{modelValue:z.activeNames,"onUpdate:modelValue":t[3]||(t[3]=e=>z.activeNames=e),class:"tab-box-sli"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{name:"1"},{title:(0,s.w5)((()=>[m])),default:(0,s.w5)((()=>[(0,s._)("div",null,"Request Method : "+(0,u.zw)(l.result.method),1),(0,s._)("div",null,"Request URL : "+(0,u.zw)(l.result.url),1)])),_:1}),(0,s.Wm)(C,{name:"2"},{title:(0,s.w5)((()=>[p])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.requests_header,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",null,(0,u.zw)(t+" : "+e)+" :",1)])))),256))])),_:1}),(0,s.Wm)(C,{name:"3"},{title:(0,s.w5)((()=>[w])),default:(0,s.w5)((()=>[(0,s._)("span",null,(0,u.zw)(l.result.requests_body),1)])),_:1})])),_:1},8,["modelValue"])])):(0,s.kq)("",!0)])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(U,{label:"日志"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{height:"400px",onWheel:t[5]||(t[5]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.log_data,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,["DEBUG"===e[0]?((0,s.wg)(),(0,s.j4)(V,{key:0,style:{"margin-top":"3px"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e[1]),1)])),_:2},1024)):"WARNING"===e[0]?((0,s.wg)(),(0,s.j4)(V,{key:1,style:{"margin-top":"3px"},type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e[1]),1)])),_:2},1024)):"ERROR"===e[0]?((0,s.wg)(),(0,s.j4)(V,{key:2,style:{"margin-top":"3px"},type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e[1]),1)])),_:2},1024)):"INFO"===e[0]?((0,s.wg)(),(0,s.j4)(V,{key:3,style:{"margin-top":"3px"},type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e[1]),1)])),_:2},1024)):"EXCEPT"===e[0]?((0,s.wg)(),(0,s.iD)("pre",h,(0,u.zw)(e[1]),1)):(0,s.kq)("",!0)])))),256))])])),_:1})])),_:1}),(0,s.Wm)(U,{disabled:""},{label:(0,s.w5)((()=>["成功"===l.result.state?((0,s.wg)(),(0,s.iD)("span",b,(0,u.zw)("Assert : "+l.result.state),1)):"失败"===l.result.state?((0,s.wg)(),(0,s.iD)("span",f,(0,u.zw)("Assert : "+l.result.state),1)):((0,s.wg)(),(0,s.iD)("span",_,(0,u.zw)(l.result.state),1))])),_:1}),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(U,{key:3,disabled:""},{label:(0,s.w5)((()=>[l.result.status_cede<=300?((0,s.wg)(),(0,s.iD)("span",k,(0,u.zw)("Status : "+l.result.status_cede),1)):((0,s.wg)(),(0,s.iD)("span",y,(0,u.zw)("Status : "+l.result.status_cede),1))])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(U,{disabled:""},{label:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)("Time : "+l.result.run_time),1)])),_:1})])),_:1}),"失败"===l.result.state&&l.showbtn?((0,s.wg)(),(0,s.iD)("div",W,[(0,s.Wm)(R,{onClick:D.getInterfaces,type:"success",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("提交bug")])),_:1},8,["onClick"])])):(0,s.kq)("",!0),(0,s.Wm)(H,{title:"提交bug",modelValue:z.addBugDlg,"onUpdate:modelValue":t[8]||(t[8]=e=>z.addBugDlg=e),width:"40%","before-close":D.closeDialogResult},{footer:(0,s.w5)((()=>[(0,s._)("div",B,[(0,s.Wm)(R,{onClick:D.closeDialogResult},{default:(0,s.w5)((()=>[(0,s.Uk)("取 消")])),_:1},8,["onClick"]),(0,s.Wm)(R,{type:"success",onClick:D.saveBug},{default:(0,s.w5)((()=>[(0,s.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(L,{model:z.bugForm},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{label:"所属接口"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{size:"small",modelValue:z.bugForm.interface,"onUpdate:modelValue":t[6]||(t[6]=e=>z.bugForm.interface=e),placeholder:"bug对应的接口",style:{width:"100%"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.interfaces,(e=>((0,s.wg)(),(0,s.j4)(j,{label:e.name+" "+e.url,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(I,{label:"bug描述"},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{autosize:{minRows:3,maxRows:4},modelValue:z.bugForm.desc,"onUpdate:modelValue":t[7]||(t[7]=e=>z.bugForm.desc=e),type:"textarea",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"])],64)}var z=l(62669),D=l(20065),x={props:{result:{default:{}},showbtn:{default:!0}},computed:{...(0,D.rn)(["pro"])},components:{Editor:z.Z},data(){return{activeNames:["1","2","3"],addBugDlg:!1,bugForm:{interface:null,desc:"",info:"",status:"待处理"},interfaces:[]}},methods:{async saveBug(){this.bugForm.project=this.pro.id,this.bugForm.info=this.result;const e=await this.$api.createBugs(this.bugForm);201===e.status&&(this.$message({type:"success",message:"bug提交成功",duration:1e3}),this.addBugDlg=!1,this.bugForm={interface:null,desc:"",info:"",status:"待处理"})},closeDialogResult(){this.addBugDlg=!1,this.bugForm={interface:null,desc:"",info:"",status:"待处理"}},async getInterfaces(){const e=await this.$api.getnewInterfaces();200===e.status&&(this.interfaces=e.data,this.addBugDlg=!0)}}},U=l(40089);const V=(0,U.Z)(x,[["render",v]]);var F=V},948:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var s=l(73396),a=l(87139);const u=e=>((0,s.dD)("data-v-3c626c1b"),e=e(),(0,s.Cn)(),e),i={class:"bug_box"},o=u((()=>(0,s._)("div",{style:{color:"#00aa7f",margin:"10px","font-size":"15px"}},[(0,s._)("b",null,"bug统计")],-1))),n={class:"chartBox",ref:"chart1Box"},r={class:"chartBox",ref:"chart2Box"},d={key:0},g={key:1},m={key:2},p={key:3},w={key:4},c={style:{"text-align":"right"}},h=u((()=>(0,s._)("b",null,"bug信息",-1))),b={style:{"margin-top":"10px"}},f=u((()=>(0,s._)("b",null,"用例执行信息",-1))),_={style:{"margin-top":"10px"}},k=u((()=>(0,s._)("b",null,"bug处理记录",-1))),y={style:{"margin-top":"10px"}},W={key:0},B={style:{color:"#409eff","margin-right":"8px"}},v={class:"dialog-footer"};function z(e,t,l,u,z,D){const x=(0,s.up)("el-col"),U=(0,s.up)("el-row"),V=(0,s.up)("el-button"),F=(0,s.up)("el-badge"),C=(0,s.up)("el-table-column"),q=(0,s.up)("el-tag"),$=(0,s.up)("el-tooltip"),R=(0,s.up)("el-table"),j=(0,s.up)("el-card"),A=(0,s.up)("el-descriptions-item"),I=(0,s.up)("el-descriptions"),T=(0,s.up)("Result"),L=(0,s.up)("el-timeline-item"),H=(0,s.up)("el-timeline"),E=(0,s.up)("el-empty"),N=(0,s.up)("el-scrollbar"),Y=(0,s.up)("el-drawer"),K=(0,s.up)("el-option"),Z=(0,s.up)("el-select"),M=(0,s.up)("el-form-item"),O=(0,s.up)("el-input"),G=(0,s.up)("el-form"),P=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(N,{height:"calc(100vh - 55px)"},{default:(0,s.w5)((()=>[(0,s._)("div",i,[o,(0,s.Wm)(U,{gutter:10},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{span:12},{default:(0,s.w5)((()=>[(0,s._)("div",n,null,512)])),_:1}),(0,s.Wm)(x,{span:12},{default:(0,s.w5)((()=>[(0,s._)("div",r,null,512)])),_:1})])),_:1}),(0,s.Wm)(j,{class:"bug_list"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{style:{"margin-bottom":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{onClick:t[0]||(t[0]=e=>z.showBugs=z.bugs),type:"info",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("全部")])),_:1}),(0,s.Wm)(F,{value:D.bugs1.length,hidden:0===D.bugs1.length,class:"item",max:99,style:{margin:"0 10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{onClick:t[1]||(t[1]=e=>z.showBugs=D.bugs1),type:"danger",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("待处理")])),_:1})])),_:1},8,["value","hidden"]),(0,s.Wm)(V,{onClick:t[2]||(t[2]=e=>z.showBugs=D.bugs2),type:"warning",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("处理中")])),_:1}),(0,s.Wm)(V,{onClick:t[3]||(t[3]=e=>z.showBugs=D.bugs3),type:"success",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("处理完成")])),_:1}),(0,s.Wm)(V,{onClick:t[4]||(t[4]=e=>z.showBugs=D.bugs4),type:"primary",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("无需处理")])),_:1}),(0,s.Wm)(V,{onClick:t[5]||(t[5]=e=>z.showBugs=D.bugs5),type:"info",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("已关闭")])),_:1})])),_:1}),(0,s.Wm)(R,{data:z.showBugs,style:{width:"100%"},size:"mini","empty-text":"暂无数据"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{label:"序号",align:"center",width:"60"},{default:(0,s.w5)((e=>[(0,s._)("span",null,(0,a.zw)(e.$index+1),1)])),_:1}),(0,s.Wm)(C,{label:"提交时间","min-width":"120",align:"center","show-overflow-tooltip":""},{default:(0,s.w5)((t=>[(0,s._)("span",null,(0,a.zw)(e.$tools.rTime(t.row.create_time)),1)])),_:1}),(0,s.Wm)(C,{"show-overflow-tooltip":"",prop:"desc",align:"center",label:"bug描述","min-width":"120"}),(0,s.Wm)(C,{"show-overflow-tooltip":"",prop:"interface_url",align:"center",label:"所属接口","min-width":"00"}),(0,s.Wm)(C,{prop:"status",label:"bug状态","min-width":"80",align:"center"},{default:(0,s.w5)((e=>["待处理"===e.row.status?((0,s.wg)(),(0,s.iD)("span",d,[(0,s.Wm)(q,{color:"#f56c6c",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1024)])):(0,s.kq)("",!0),"处理中"===e.row.status?((0,s.wg)(),(0,s.iD)("span",g,[(0,s.Wm)(q,{color:"#e6a23c",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1024)])):(0,s.kq)("",!0),"处理完成"===e.row.status?((0,s.wg)(),(0,s.iD)("span",m,[(0,s.Wm)(q,{color:"#67c23a",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1024)])):(0,s.kq)("",!0),"无需处理"===e.row.status?((0,s.wg)(),(0,s.iD)("span",p,[(0,s.Wm)(q,{color:"#d3d4d6",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1024)])):(0,s.kq)("",!0),"已关闭"===e.row.status?((0,s.wg)(),(0,s.iD)("span",w,[(0,s.Wm)(q,{color:"rgb(0, 170, 127)",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1024)])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(C,{"min-width":"180"},{default:(0,s.w5)((e=>[(0,s._)("div",c,[(0,s.Wm)($,{class:"item",effect:"dark",content:"查看bug详情",placement:"top"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{icon:"el-icon-view",onClick:t=>D.showBugInfo(e.row),size:"mini",type:"success",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("查看")])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Wm)($,{class:"item",effect:"dark",content:"更新bug",placement:"top"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{icon:"el-icon-edit-outline",onClick:t=>D.clickUpdate(e.row),size:"mini",type:"primary",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("编辑")])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Wm)($,{class:"item",effect:"dark",content:"删除bug",placement:"top"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{icon:"el-icon-delete",onClick:t=>D.delBug(e.row.id),size:"mini",type:"danger",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024)])])),_:1})])),_:1},8,["data"])])),_:1})]),(0,s.Wm)(Y,{modelValue:z.showBug,"onUpdate:modelValue":t[6]||(t[6]=e=>z.showBug=e),title:"I am the title","with-header":!1,size:"50%"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{height:"calc(100vh - 20px)"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[h,(0,s._)("div",b,[(0,s.Wm)(I,{column:4,direction:"vertical",border:""},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:"提交者"},{default:(0,s.w5)((()=>[(0,s.Uk)("admin")])),_:1}),(0,s.Wm)(A,{label:"bug状态"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(z.bugInfo.status),1)])),_:1}),(0,s.Wm)(A,{label:"所属接口"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(z.bugInfo.interface_url),1)])),_:1}),(0,s.Wm)(A,{label:"提交时间"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$tools.rTime(z.bugInfo.create_time)),1)])),_:1})])),_:1})])])),_:1}),(0,s.Wm)(j,{style:{margin:"5px","min-height":"400px"}},{default:(0,s.w5)((()=>[f,(0,s._)("div",_,[(0,s.Wm)(T,{result:z.bugInfo.info,showbtn:!1},null,8,["result"])])])),_:1}),z.bugLogs?((0,s.wg)(),(0,s.j4)(j,{key:0,style:{"min-height":"400px"}},{default:(0,s.w5)((()=>[k,(0,s._)("div",y,[(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.bugLogs,((t,l)=>((0,s.wg)(),(0,s.j4)(L,{key:l,timestamp:e.$tools.rDate(t.create_time),placement:"top",color:"#0bbd87"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s._)("h4",null,(0,a.zw)(t.handle),1),t.remark?((0,s.wg)(),(0,s.iD)("p",W,"评论："+(0,a.zw)(t.remark),1)):(0,s.kq)("",!0),(0,s._)("span",B,(0,a.zw)(t.update_user),1),(0,s._)("span",null,"操作于 "+(0,a.zw)(e.$tools.rTime(t.create_time)),1)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})])])),_:1})):((0,s.wg)(),(0,s.j4)(E,{key:1,description:"无","image-size":400}))])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(P,{title:"更新bug信息",modelValue:z.updateBugDlg,"onUpdate:modelValue":t[9]||(t[9]=e=>z.updateBugDlg=e),width:"30%","before-close":D.closeDialogBug},{footer:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s.Wm)(V,{size:"mini",onClick:D.closeDialogBug},{default:(0,s.w5)((()=>[(0,s.Uk)("取 消")])),_:1},8,["onClick"]),(0,s.Wm)(V,{size:"mini",type:"success",onClick:D.updateBug},{default:(0,s.w5)((()=>[(0,s.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(G,{model:z.updateBugForm},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{label:"bug状态"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{style:{width:"100%"},modelValue:z.updateBugForm.status,"onUpdate:modelValue":t[7]||(t[7]=e=>z.updateBugForm.status=e),placeholder:"请选择bug状态"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{label:"待处理",value:"待处理"}),(0,s.Wm)(K,{label:"处理中",value:"处理中"}),(0,s.Wm)(K,{label:"处理完成",value:"处理完成"}),(0,s.Wm)(K,{label:"无需处理",value:"无需处理"}),(0,s.Wm)(K,{label:"已关闭",value:"已关闭"})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(M,{label:"问题评论"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{type:"textarea",autosize:{minRows:2,maxRows:6},modelValue:z.updateBugForm.remark,"onUpdate:modelValue":t[8]||(t[8]=e=>z.updateBugForm.remark=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"])])),_:1})])}var D=l(81578),x=l(20065),U={data(){return{showBug:!1,bugInfo:null,bugLogs:null,updateBugDlg:!1,updateBugForm:{},showBugs:[],bugs:[]}},computed:{...(0,x.rn)(["pro"]),bugs1(){return this.bugs.filter(((e,t,l)=>"待处理"===e.status))},bugs2(){return this.bugs.filter(((e,t,l)=>"处理中"===e.status))},bugs3(){return this.bugs.filter(((e,t,l)=>"处理完成"===e.status))},bugs4(){return this.bugs.filter(((e,t,l)=>"无需处理"===e.status))},bugs5(){return this.bugs.filter(((e,t,l)=>"已关闭"===e.status))}},components:{Result:D.Z},methods:{async getAllBug(){const e=await this.$api.getBugs({project:this.pro.id});200===e.status&&(this.bugs=e.data)},closeDialogBug(){this.updateBugForm="",this.updateBugDlg=!1,this.getAllBug(),this.showBugs=this.bugs},showBugInfo(e){this.bugInfo=e,this.getBugAllLogs(e.id),this.showBug=!0},async getBugAllLogs(e){const t=await this.$api.getBugLogs({bug:e});200===t.status&&t.data.length>0&&(this.bugLogs=t.data)},async updateBug(){const e=await this.$api.updateBug(this.updateBugForm.id,this.updateBugForm);this.updateBugForm.remark="",200===e.status&&(this.$message({type:"success",message:"修改成功",duration:1e3}),this.updateBugForm="",await this.getBugAllLogs(this.updateBugForm.id),this.updateBugDlg=!1,await this.getAllBug(),this.showTable(),this.showBugs=this.bugs)},showTable(){const e=this.$refs.chart1Box,t=[this.bugs.length,this.bugs3.length,this.bugs2.length,this.bugs1.length,this.bugs4.length,this.bugs5.length],l=["bug总数","处理完成","处理中","待处理","无需处理","已关闭"];this.$chart.chart1(e,t,l);const s=this.$refs.chart2Box;this.$chart.chart2(s,[{value:this.bugs3.length,name:"处理完成"},{value:this.bugs2.length,name:"处理中"},{value:this.bugs1.length,name:"待处理"},{value:this.bugs4.length,name:"无需处理"},{value:this.bugs5.length,name:"已关闭"}])},delBug(e){this.$confirm("此操作将永久删除该bug, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const t=await this.$api.deleteBug(e);204===t.status&&(this.$message({type:"success",message:"删除成功",duration:1e3}),await this.getAllBug(),this.showTable(),this.showBugs=this.bugs)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},clickUpdate(e){this.updateBugDlg=!0,this.updateBugForm={...e},this.updateBugForm.remark=""}},updated(){this.showTable()},async created(){await this.getAllBug(),this.showBugs=this.bugs,this.showTable()}},V=l(40089);const F=(0,V.Z)(U,[["render",z],["__scopeId","data-v-3c626c1b"]]);var C=F}}]);
//# sourceMappingURL=79.f84bdbc1.js.map