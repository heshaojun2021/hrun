{"version":3,"file":"js/929.22ebcbe2.js","mappings":"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","sources":["webpack://frontend-web/./src/views/Reports/ReportPush.vue","webpack://frontend-web/./src/views/Reports/ReportPush.vue?135d"],"sourcesContent":["<template>\r\n <el-button @click=\"clickAdd\"  type=\"success\" icon=\"el-icon-plus\" style=\"margin-bottom: 30px;margin-left:20px;margin-top: 25px;\">新增推送信息</el-button>\r\n <el-scrollbar >\r\n  <div class=\"table_data\">\r\n    <el-table :data=\"hookList\" v-loading=\"isLoading\" stripe style=\"width: 100%\" empty-text=\"暂无数据\"  >\r\n            <el-table-column label=\"序号\" align=\"center\" width=\"60\">\r\n              <template #default=\"scope\">\r\n                <span>{{ scope.$index + 1 }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"推送名称\" prop=\"name\" align=\"center\" />\r\n            <el-table-column label=\"hook地址\" prop=\"webhook\" align=\"center\" >\r\n              <template #default=\"scope\">\r\n                <el-tooltip placement=\"top-start\" effect=\"dark\" :content=\"scope.row.webhook\">\r\n                  <div >{{ scope.row.webhook.length > 30 ? scope.row.webhook.slice(0, 30) + '...' : scope.row.webhook }}</div>\r\n                </el-tooltip>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"接收人\" prop=\"user_ids\" align=\"center\"/>\r\n            <el-table-column label=\"测试计划\" prop=\"testPlan.name\" align=\"center\"/>\r\n            <el-table-column label=\"创建时间\" align=\"center\">\r\n            <template #default=\"scope\">\r\n              {{ $tools.rTime(scope.row.create_time) }}\r\n            </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"180\" align=\"center\">\r\n              <template #default=\"scope\">\r\n                <el-button @click=\"clickEdit(scope.row)\" size=\"mini\" plain type=\"success\" icon=\"el-icon-edit-outline\">编辑</el-button>\r\n                <el-button @click=\"delHook(scope.row.id)\" size=\"mini\" type=\"danger\" plain icon=\"el-icon-delete\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n    </el-table>\r\n  </div>\r\n\r\n  <div class=\"pagination-container\">\r\n    <el-pagination  background layout=\"total, prev, pager, next, jumper\"\r\n                    @current-change=\"currentPages\"\r\n                    default-page-size=\"100\"\r\n                    :total=\"pages.count\"\r\n                    :current-page=\"pages.current\"\r\n                   next-text=\"下一页\" prev-text=\"上一页\">\r\n      </el-pagination>\r\n  </div>\r\n  </el-scrollbar>\r\n\r\n<!--  新增弹窗-->\r\n  <el-dialog v-model=\"addDlg\" title=\"新增推送信息\"  width=\"37%\" custom-class=\"class_dialog\" :required=\"true\" style=\"text-align:left\" :before-close=\"clearValidation\">\r\n\t\t<el-form :model=\"addForm\"  :rules=\"rulesHook\" ref=\"HookRef\" label-width=\"120px\" style=\"max-width: 600px\">\r\n      <el-form-item prop=\"name\" label=\"推送名称\">\r\n        <el-input v-model=\"addForm.name\"  maxlength=\"50\" minlength=\"1\" placeholder=\"请输入推送名称\"/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"webhook\" label=\"webhook地址\" >\r\n        <el-input v-model=\"addForm.webhook\"   minlength=\"3\" placeholder=\"请输入webhook地址\" show-word-limit/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"testPlan_id\" label=\"测试计划\">\r\n\t\t\t\t<el-select v-model=\"addForm.testPlan_id\" placeholder=\"请选择测试计划\" style=\"width: 100%;\">\r\n\t\t\t\t\t<el-option :label=\"iter.name\" :value=\"iter.id\" v-for=\"iter in testPlans\" :key=\"iter.id\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n      <el-form-item label=\"接收人\">\r\n\t\t\t\t<el-select  multiple v-model=\"addForm.user_ids\" placeholder=\"请选择接收人\" style=\"width: 100%;\">\r\n\t\t\t\t\t<el-option  :label=\"'@all'\" :value=\"'@all'\"  :key=\"'@all'\" ></el-option>\r\n          <el-option  :label=\"iter.weChat_name\" :value=\"iter.weChat_name\" v-for=\"iter in filteredUsers\" :key=\"iter.id\"  :disabled=\"editForm.user_ids.includes('@all')\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t</el-form>\r\n\t\t<template #footer>\r\n\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"clearValidation\" size=\"medium\">取消</el-button>\r\n\t\t\t\t<el-button type=\"success\" @click=\"AddInter\" size=\"medium\">确定</el-button>\r\n\t\t\t</span>\r\n\t\t</template>\r\n\t</el-dialog>\r\n\r\n<!--  修改弹窗-->\r\n  <el-dialog v-model=\"editDlg\" title=\"修改推送信息\"  width=\"37%\" custom-class=\"class_dialog\" :required=\"true\" style=\"text-align:left\" :before-close=\"clearValidation\">\r\n\t\t<el-form :model=\"editForm\"  :rules=\"rulesHook\" ref=\"HookRef\" label-width=\"120px\" style=\"max-width: 600px\">\r\n      <el-form-item prop=\"name\" label=\"推送名称\">\r\n        <el-input v-model=\"editForm.name\"  maxlength=\"50\" minlength=\"1\" placeholder=\"请输入推送名称\"/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"webhook\" label=\"webhook地址\" >\r\n        <el-input v-model=\"editForm.webhook\"   minlength=\"3\" placeholder=\"请输入webhook地址\" show-word-limit/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"testPlan_id\" label=\"测试计划\">\r\n\t\t\t\t<el-select v-model=\"editForm.testPlan_id\" placeholder=\"请选择测试计划\" style=\"width: 100%;\">\r\n\t\t\t\t\t<el-option :label=\"iter.name\" :value=\"iter.id\" v-for=\"iter in testPlans\" :key=\"iter.id\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n      <el-form-item label=\"接收人\">\r\n\t\t\t\t<el-select  multiple v-model=\"editForm.user_ids\" placeholder=\"请选择接收人\" style=\"width: 100%;\">\r\n\t\t\t\t\t<el-option  :label=\"'@all'\" :value=\"'@all'\"  :key=\"'@all'\" ></el-option>\r\n          <el-option  :label=\"iter.weChat_name\" :value=\"iter.weChat_name\" v-for=\"iter in filteredUsers\" :key=\"iter.id\" :disabled=\"editForm.user_ids.includes('@all')\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<template #footer>\r\n\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"clearValidation\" size=\"medium\">取消</el-button>\r\n\t\t\t\t<el-button type=\"success\" @click=\"EditInter\" size=\"medium\">确定</el-button>\r\n\t\t\t</span>\r\n\t\t</template>\r\n\t</el-dialog>\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport {mapActions, mapState} from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      hookList:'',\r\n      pages:'',\r\n      addDlg:false,\r\n      isLoading: false,\r\n      editDlg: false,\r\n      addForm:{\r\n        name: '',\r\n        webhook: '',\r\n        user_ids: [],\r\n        project_id: '',\r\n        testPlan_id: '',\r\n      },\r\n      editForm:{\r\n        name: '',\r\n        webhook: '',\r\n        user_ids: [],\r\n        project_id: '',\r\n        testPlan_id: '',\r\n      },\r\n      rulesHook: {\r\n\t\t\t\t// 验证用户名是否合法\r\n\t\t\t\tname: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t// 验证密码是否合法\r\n\t\t\t\twebhook: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入webhook地址',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n       testPlan_id: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择测试计划',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\r\n    }},\r\n  computed: {\r\n\t\t...mapState(['pro','testPlans','Users']),\r\n    filteredUsers() {\r\n      const filtered = this.Users.filter( iter=> iter.weChat_name !== null);\r\n      return filtered\r\n    }\r\n\t},\r\n\r\n  methods: {\r\n    ...mapActions(['getAllUser']),\r\n\r\n    // 点击添加\r\n    clickAdd() {\r\n      this.addDlg = true;\r\n      this.addForm = {\r\n        name: '',\r\n        webhook: '',\r\n        user_ids: [],\r\n        project_id: this.pro.id,\r\n        testPlan_id: '',\r\n          }\r\n        },\r\n    // 点击修改\r\n\t\tclickEdit(info) {\r\n\t\t\tthis.editDlg = true;\r\n\t\t\tthis.editForm = { ...info };\r\n\t\t\tthis.editForm.project_id = this.pro.id\r\n      console.log(this.editForm)\r\n\t\t},\r\n\r\n    // 点击删除\r\n    delHook(id) {\r\n\t\t\tthis.$confirm('此操作将永久删除该推送信息, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(async () => {\r\n\t\t\t\t\tconst response = await this.$api.delHook(id)\r\n\t\t\t\t\tif(response.status ===204){\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 刷新页面\r\n\t\t\t\t\t\tthis.getAllHook(this.pro)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n    // 点击关闭弹窗\r\n    clearValidation() {\r\n      this.addDlg = false;\r\n      this.editDlg = false;\r\n      this.$refs.HookRef.clearValidate(); // 清除验证信息\r\n    },\r\n     // 列表数据展示\r\n    async getAllHook(){\r\n      this.isLoading=true;\r\n      const response =await this.$api.getHook(this.pro.id)\r\n\t\t\tif (response.status ===200){\r\n\t\t\t\tthis.hookList = response.data.result;\r\n\t\t\t\tthis.pages = response.data\r\n        // 遍历每条记录并处理user_ids字段\r\n       this.hookList.forEach(record => {\r\n          const userIDs = eval(record.user_ids);\r\n          record.user_ids = userIDs;\r\n        });\r\n\t\t\t\tconsole.log(this.hookList)\r\n\r\n\t\t\t}\r\n      this.isLoading=false;\r\n\r\n    },\r\n    // 新增接口\r\n    async AddInter(){\r\n      this.$refs.HookRef.validate(async vaild => {\r\n\t\t\t\t// 判断是否验证通过，不通过则直接retrue\r\n\t\t\t\tif (!vaild) return;\r\n      // 调用接口等逻辑\r\n        const params = {...this.addForm}\r\n        const formattedIds = params.user_ids.map(id => `'${id}'`); // 在每个元素周围添加单引号\r\n        params.user_ids = `[${formattedIds.join(',')}]`; // 将数组转换为字符串，并使用方括号括起来\r\n\r\n        const response = await this.$api.createHook(params)\r\n        if (response.status===201) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功',\r\n            duration: 1000})\r\n\r\n          this.addForm = {\r\n            name: '',\r\n            webhook: '',\r\n            user_ids: [],\r\n            project_id: '',\r\n            testPlan_id: '',\r\n\r\n            };\r\n          this.addDlg = false;\r\n          this.getAllHook()\r\n        }\r\n      })\r\n    },\r\n    // 修改接口\r\n    async EditInter(){\r\n      this.$refs.HookRef.validate(async valid => {\r\n        if (!valid) return\r\n        const  params = {...this.editForm}\r\n        const formattedIds = params.user_ids.map(id => `'${id}'`); // 在每个元素周围添加单引号\r\n        params.user_ids = `[${formattedIds.join(',')}]`; // 将数组转换为字符串，并使用方括号括起来\r\n        const response = await  this.$api.updateHook(params.id,params)\r\n        if (response.status===200) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '修改成功',\r\n            duration: 1000});\r\n\r\n          this.editForm = {\r\n            name: '',\r\n            webhook: '',\r\n            user_ids: [],\r\n            project_id: '',\r\n            testPlan_id: '',\r\n            };\r\n          this.editDlg = false;\r\n          this.getAllHook()\r\n        }\r\n      })\r\n    },\r\n    currentPages(currentPage) {\r\n      this.getAllHook(currentPage)\r\n      this.hookList.page = currentPage;\r\n\r\n  },\r\n\r\n  },\r\n\r\n  created() {\r\n  this.getAllHook()\r\n  this.getAllUser()\r\n\t}\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.table_data{\r\n  margin:10px;\r\n}\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.dialog-footer .el-button:first-child {\r\n  margin-right: 10px;\r\n}\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n\r\n</style>","import { render } from \"./ReportPush.vue?vue&type=template&id=58f111e0&scoped=true\"\nimport script from \"./ReportPush.vue?vue&type=script&lang=js\"\nexport * from \"./ReportPush.vue?vue&type=script&lang=js\"\n\nimport \"./ReportPush.vue?vue&type=style&index=0&id=58f111e0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58f111e0\"]])\n\nexport default __exports__"],"names":["data","hookList","pages","addDlg","isLoading","editDlg","addForm","name","webhook","user_ids","project_id","testPlan_id","editForm","rulesHook","required","message","trigger","computed","mapState","filteredUsers","filtered","this","Users","filter","iter","weChat_name","methods","mapActions","clickAdd","pro","id","clickEdit","info","console","log","delHook","$confirm","confirmButtonText","cancelButtonText","type","then","async","response","$api","status","$message","getAllHook","catch","clearValidation","$refs","HookRef","clearValidate","getHook","result","forEach","record","userIDs","eval","AddInter","validate","vaild","params","formattedIds","map","join","createHook","duration","EditInter","valid","updateHook","currentPages","currentPage","page","created","getAllUser","class","_createVNode","_component_el_button","onClick","$options","icon","style","_component_el_scrollbar","_createElementVNode","_hoisted_1","_createBlock","_component_el_table","$data","stripe","_component_el_table_column","label","align","width","default","_withCtx","scope","_toDisplayString","$index","prop","_component_el_tooltip","placement","effect","content","row","length","slice","_ctx","$tools","rTime","create_time","$event","size","plain","_hoisted_2","_component_el_pagination","background","layout","onCurrentChange","total","count","current","_component_el_dialog","title","footer","_hoisted_3","_component_el_form","model","rules","ref","_component_el_form_item","_component_el_input","maxlength","minlength","placeholder","_component_el_select","_createElementBlock","_Fragment","_renderList","testPlans","_component_el_option","value","key","multiple","disabled","includes","_hoisted_4","__exports__","render"],"sourceRoot":""}