"use strict";(self["webpackChunkfrontend_web"]=self["webpackChunkfrontend_web"]||[]).push([[214],{79327:function(t,e,a){a.d(e,{Z:function(){return f}});var i=a(73396),s=a(87139);function l(t,e,a,l,o,r){return(0,i.wg)(),(0,i.iD)("span",null,(0,s.zw)(o.displayValue),1)}let o=0;const r="webkit moz ms o".split(" ");let n,c;const p="undefined"===typeof window;if(p)n=function(){},c=function(){};else{let t;n=window.requestAnimationFrame,c=window.cancelAnimationFrame;for(let e=0;e<r.length;e++){if(n&&c)break;t=r[e],n=n||window[t+"RequestAnimationFrame"],c=c||window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]}n&&c||(n=function(t){const e=(new Date).getTime(),a=Math.max(0,16-(e-o)),i=window.setTimeout((()=>{t(e+a)}),a);return o=e+a,i},c=function(t){window.clearTimeout(t)})}var u={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(t,e,a,i){return a*(1-Math.pow(2,-10*t/i))*1024/1023+e}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=n(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){c(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,n(this.count)},reset(){this.startTime=null,c(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(t){this.startTime||(this.startTime=t),this.timestamp=t;const e=t-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=n(this.count):this.$emit("callback")},isNumber(t){return!isNaN(parseFloat(t))},formatNumber(t){t=t.toFixed(this.decimals),t+="";const e=t.split(".");let a=e[0];const i=e.length>1?this.decimal+e[1]:"",s=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))while(s.test(a))a=a.replace(s,"$1"+this.separator+"$2");return this.prefix+a+i+this.suffix}},destroyed(){c(this.rAF)}},d=a(40089);const h=(0,d.Z)(u,[["render",l]]);var m=h,f=m;"undefined"!==typeof window&&window.Vue&&window.Vue.component("count-to",m)},5214:function(t,e,a){a.r(e),a.d(e,{default:function(){return rt}});var i=a(73396),s=a(87139);const l=t=>((0,i.dD)("data-v-e8a4dd4c"),t=t(),(0,i.Cn)(),t),o={class:"box"},r={class:"projectinfo_cs"},n={key:0,class:"projectinfo"},c={class:"el-icon-top",style:{color:"#13ce66","margin-left":"5px","font-size":"14px"}},p={key:1,class:"projectinfo"},u={class:"el-icon-bottom",style:{color:"#ff4d4f","margin-left":"5px","font-size":"14px"}},d={key:2,class:"projectinfo"},h={class:"el-icon-top",style:{color:"#13ce66","margin-left":"5px","font-size":"14px"}},m={key:3,class:"projectinfo"},f={class:"el-icon-bottom",style:{color:"#ff4d4f","margin-left":"5px","font-size":"14px"}},y={key:4,style:{display:"flex","justify-content":"space-between","font-size":"14px","margin-top":"20px"}},g={style:{color:"#ff4d4f"}},w={style:{display:"flex","justify-content":"space-between","align-items":"center",margin:"5px"}},_=l((()=>(0,i._)("div",null,[(0,i._)("strong",null,[(0,i._)("span",{style:{}},"接口维护情况统计")]),(0,i._)("i",{class:"el-icon-suitcase",style:{"margin-left":"5px"}})],-1))),b={style:{display:"flex","align-items":"center"}},x=l((()=>(0,i._)("div",{style:{display:"flex","justify-content":"space-between","align-items":"center",margin:"5px","margin-bottom":"15px"}},[(0,i._)("div",null,[(0,i._)("strong",null,[(0,i._)("span",{style:{}},"近七日平台使用频率")]),(0,i._)("i",{class:"el-icon-s-data",style:{"margin-left":"5px"}})])],-1))),k=l((()=>(0,i._)("div",{style:{display:"flex","justify-content":"space-between","align-items":"center",margin:"5px","margin-bottom":"15px"}},[(0,i._)("div",null,[(0,i._)("strong",null,[(0,i._)("span",{style:{}},"bug处理情况")]),(0,i._)("i",{class:"el-icon-pie-chart",style:{"margin-left":"5px"}})])],-1))),v=l((()=>(0,i._)("div",{style:{display:"flex","justify-content":"space-between","align-items":"center",margin:"5px"}},[(0,i._)("div",null,[(0,i._)("strong",null,[(0,i._)("span",{style:{}},"Mock日志")]),(0,i._)("i",{class:"el-icon-tickets",style:{"margin-left":"5px"}})])],-1))),D={class:"grey-text"},V=l((()=>(0,i._)("span",{style:{"font-weight":"bold"}},"调用IP：",-1))),C={class:"grey-text1"},S=l((()=>(0,i._)("span",{style:{"font-weight":"bold"}},"HTTP状态码：",-1))),T={key:2,class:"grey-text1",style:{color:"#67c23a"}},q={key:3,class:"grey-text1",style:{color:"#e6a23c"}},j={key:4,class:"grey-text1",style:{color:"#f56c6c"}},z={class:"grey-text"},A=l((()=>(0,i._)("div",{style:{display:"flex","justify-content":"space-between","align-items":"center",margin:"5px"}},[(0,i._)("div",null,[(0,i._)("strong",null,[(0,i._)("span",null,"近三天报告运行情况统计")]),(0,i._)("i",{class:"el-icon-s-data",style:{"margin-left":"5px"}})]),(0,i._)("strong",null,[(0,i._)("span",{style:{"font-size":"14px",color:"grey"}},"通过率(%)")])],-1)));function F(t,e,a,l,F,L){const W=(0,i.up)("countTo"),I=(0,i.up)("el-card"),$=(0,i.up)("el-col"),N=(0,i.up)("el-row"),R=(0,i.up)("el-date-picker"),B=(0,i.up)("el-button"),O=(0,i.up)("ApiChart"),P=(0,i.up)("WeekLoginChart"),U=(0,i.up)("BugChart"),Z=(0,i.up)("el-tag"),E=(0,i.up)("el-timeline-item"),H=(0,i.up)("el-timeline"),M=(0,i.up)("ReportChart"),Y=(0,i.up)("el-scrollbar");return(0,i.wg)(),(0,i.j4)(Y,{height:"calc(100vh - 50px)"},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Wm)(N,{gutter:9,style:{"margin-bottom":"15px"}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(F.proInfo,((t,e)=>((0,i.wg)(),(0,i.j4)($,{key:e,span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{default:(0,i.w5)((()=>[(0,i._)("div",r,(0,s.zw)(t.name),1),(0,i.Wm)(W,{style:{"font-size":"30px","text-align":"right"},"start-val":0,"end-val":t.count,duration:2600},null,8,["end-val"]),"lastIncrease"===t.changeType?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Uk)("自上周增长"),(0,i._)("i",c,(0,s.zw)(t.percentage),1)])):(0,i.kq)("",!0),"lastDecrease"===t.changeType?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Uk)("自上周下降"),(0,i._)("i",u,(0,s.zw)(t.percentage),1)])):(0,i.kq)("",!0),"yastdayIncrease"===t.changeType?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Uk)("自昨日增长"),(0,i._)("i",h,(0,s.zw)(t.percentage),1)])):(0,i.kq)("",!0),"yastdayDecrease"===t.changeType?((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Uk)("自昨日下降"),(0,i._)("i",f,(0,s.zw)(t.percentage),1)])):(0,i.kq)("",!0),"job"===t.changeType?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("span",null,"运行中："+(0,s.zw)(t.run_service),1),(0,i._)("span",g,"已暂停："+(0,s.zw)(t.paused),1)])):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,i.Wm)(N,{gutter:15,style:{"margin-bottom":"15px"}},{default:(0,i.w5)((()=>[F.proCase&&F.proCase.length>0?((0,i.wg)(),(0,i.j4)($,{key:0,span:9},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{header:(0,i.w5)((()=>[(0,i._)("div",w,[_,(0,i._)("div",b,[(0,i.Wm)(R,{modelValue:F.dataTime,"onUpdate:modelValue":e[0]||(e[0]=t=>F.dataTime=t),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":F.defaultTimeOptions,shortcuts:t.shortcuts,"range-separator":"至",clearable:!0,style:{width:"340px","margin-left":"auto"}},null,8,["modelValue","default-time","shortcuts"]),(0,i.Wm)(B,{type:"primary",onClick:L.submitForm,icon:"el-icon-search",style:{"margin-left":"10px"}},{default:(0,i.w5)((()=>[(0,i.Uk)("查询")])),_:1},8,["onClick"])])])])),default:(0,i.w5)((()=>[(0,i.Wm)(O,{testData:F.proCase},null,8,["testData"])])),_:1})])),_:1})):(0,i.kq)("",!0),F.buttonClick&&F.buttonClick.length>0?((0,i.wg)(),(0,i.j4)($,{key:1,span:8},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{header:(0,i.w5)((()=>[x])),default:(0,i.w5)((()=>[(0,i.Wm)(P,{testData:F.buttonClick},null,8,["testData"])])),_:1})])),_:1})):(0,i.kq)("",!0),F.proBug&&F.proBug.length>0?((0,i.wg)(),(0,i.j4)($,{key:2,span:7},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{header:(0,i.w5)((()=>[k])),default:(0,i.w5)((()=>[(0,i.Wm)(U,{testData:F.proBug},null,8,["testData"])])),_:1})])),_:1})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(N,{gutter:15},{default:(0,i.w5)((()=>[F.mockLog&&F.mockLog.length>0?((0,i.wg)(),(0,i.j4)($,{key:0,span:9},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{header:(0,i.w5)((()=>[v])),default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(H,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(F.mockLog,((e,a)=>((0,i.wg)(),(0,i.j4)(E,{key:a,timestamp:t.$tools.rTime(e.create_time),placement:"top",color:"#0bbd87"},{default:(0,i.w5)((()=>[(0,i._)("span",null,["GET"===e.method?((0,i.wg)(),(0,i.j4)(Z,{key:0,type:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.method),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(Z,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.method),1)])),_:2},1024)),(0,i._)("span",D,(0,s.zw)(e.url),1),V,(0,i._)("span",C,(0,s.zw)(e.ip),1),S,"200"===e.status_code?((0,i.wg)(),(0,i.iD)("span",T,(0,s.zw)(e.status_code),1)):(0,i.kq)("",!0),"400"===e.status_code?((0,i.wg)(),(0,i.iD)("span",q,(0,s.zw)(e.status_code),1)):(0,i.kq)("",!0),"500"===e.status_code?((0,i.wg)(),(0,i.iD)("span",j,(0,s.zw)(e.status_code),1)):(0,i.kq)("",!0),(0,i._)("span",z,(0,s.zw)(e.time_consuming),1)])])),_:2},1032,["timestamp"])))),128))])),_:1})])])),_:1})])),_:1})):(0,i.kq)("",!0),F.proReport&&F.proReport.length>0?((0,i.wg)(),(0,i.j4)($,{key:1,span:15},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{shadow:"hover"},{header:(0,i.w5)((()=>[A])),default:(0,i.w5)((()=>[(0,i.Wm)(M,{testData:F.proReport},null,8,["testData"])])),_:1})])),_:1})):(0,i.kq)("",!0)])),_:1})])])),_:1})}var L=a(37046);const W={ref:"echarts",style:{height:"400px"}};function I(t,e,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",W,null,512)}var $=a(89243),N={props:{testData:{type:Array,required:!0}},data(){return{option:{color:["#409eff","#67c23a","#e6a23c"],legend:{x:"center",y:"bottom"},tooltip:{},dataset:{dimensions:["product","接口调试","新增接口","新增用例"],source:[]},xAxis:{type:"category"},yAxis:{max:null},series:[{type:"bar"},{type:"bar"},{type:"bar"}]}}},mounted(){this.renderChart()},updated(){this.renderChart()},methods:{renderChart(){this.option.dataset.source=this.testData.map((t=>[t.user,t.interface_debug_count,t.interface_new_count,t.testcase_new_count]));const t=this.$refs.echarts,e=$.S1(t);e.setOption(this.option)}}},R=a(40089);const B=(0,R.Z)(N,[["render",I],["__scopeId","data-v-f376b006"]]);var O=B;const P={ref:"chart",style:{height:"400px"}};function U(t,e,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",P,null,512)}var Z={props:{testData:{type:Array,required:!0}},data(){return{chart:null,option:{xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"rgb(103, 77, 204)",width:5}},axisTick:{show:!1},axisLabel:{color:"black",margin:15},splitLine:{show:!1},data:[]},yAxis:{type:"value",boundaryGap:[0,"30%"],axisLine:{lineStyle:{color:"rgb(103, 77, 204)",width:5}},axisLabel:{color:"black"},splitLine:{show:!1}},visualMap:{type:"piecewise",show:!1,dimension:0,seriesIndex:0,pieces:[{gt:0,lt:7,color:"#66b1ff"}]},series:[{type:"line",smooth:.6,symbol:"none",lineStyle:{color:"#0d84ff",width:5},areaStyle:{color:new $.Q.o(0,0,0,1,[{offset:0,color:"#79bbff"},{offset:.5,color:"#a0cfff"},{offset:1,color:"#c6e2ff"}],!1)},data:[]}]}}},mounted(){this.initChart()},updated(){this.initChart()},methods:{initChart(){this.chart=$.S1(this.$refs.chart),this.option.xAxis.data=this.testData.map((t=>t.date)),this.option.series[0].data=this.testData.map((t=>t.clicks)),this.chart.setOption(this.option)}}};const E=(0,R.Z)(Z,[["render",U]]);var H=E;const M={ref:"chart",style:{height:"400px"}};function Y(t,e,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",M,null,512)}var G={props:{testData:{type:Array,required:!0}},data(){return{}},mounted(){this.initChart()},updated(){this.initChart()},methods:{initChart(){const t=$.S1(this.$refs.chart),e={tooltip:{trigger:"item",formatter:"{d}%【{c}条】"},legend:{orient:"vertical",left:"75%",top:"35%"},series:[{name:"Access From",type:"pie",center:["40%","50%"],radius:["50%","60%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:this.testData}]};t.setOption(e)}}};const K=(0,R.Z)(G,[["render",Y]]);var Q=K;const J={ref:"chart",style:{height:"400px"}};function X(t,e,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",J,null,512)}var tt={props:{testData:{type:Array,required:!0}},mounted(){this.initChart()},updated(){this.initChart()},methods:{initChart(){const t=$.S1(this.$refs.chart),e={grid:{top:50,bottom:10,left:20,right:20,containLabel:!0},tooltip:{trigger:"axis",formatter:t=>{const e=t[0].dataIndex,a=t[0].axisValueLabel,i=t[0].value;return`${this.testData[e].plan_id__name} <br/>${a} <br/> 通过率：${i}%`},axisPointer:{type:"line",lineStyle:{color:"#95d475"}}},xAxis:{type:"category",boundaryGap:!1,axisLabel:{show:!1},axisLine:{lineStyle:{color:"rgb(251, 212, 55)",width:5}},axisTick:{show:!1},data:this.testData.map((t=>t.create_time))},yAxis:{type:"value",nameTextStyle:{color:"#fff",fontSize:12,lineHeight:40},splitLine:{lineStyle:{color:"#eef5f0"}},axisLine:{lineStyle:{}},axisTick:{show:!1}},series:[{name:"通过率",type:"line",smooth:!0,showSymbol:!0,symbolSize:8,zlevel:3,itemStyle:{color:"#67C23A",borderColor:"#a3c8d8"},lineStyle:{width:3,color:"#67C23A"},areaStyle:{color:new $.Q.o(0,0,0,1,[{offset:0,color:"#95d475"},{offset:.5,color:"#b3e19d"},{offset:1,color:"#d1edc4"}],!1)},data:this.testData.map((t=>parseFloat(t.pass_rate)))}]};t.setOption(e)}}};const et=(0,R.Z)(tt,[["render",X],["__scopeId","data-v-11044330"]]);var at=et,it=a(20065),st=a(79327),lt={components:{ElCard:L.Kf,ElRow:L.dq,ElCol:L.Dv,ApiChart:O,countTo:st.Z,WeekLoginChart:H,BugChart:Q,ReportChart:at},data(){return{proall:null,proInfo:null,proBug:null,proCase:null,proReport:null,buttonClick:null,mockLog:null,defaultTimeOptions:["0000-01-01 00:00:00","0000-01-01 23:59:59"],dataTime:[]}},methods:{...(0,it.OI)(["selectPro"]),async getProInfo(t,e){let a={project:this.pro.id};t&&e&&(a={project:this.pro.id,starttime:t,endtime:e});const i=await this.$api.getProjectBoard(a);200===i.status&&(this.proall=i.data,this.proInfo=this.proall.project_info,this.proBug=this.proall.project_bug,this.proCase=this.proall.project_case,this.proReport=this.proall.project_report,this.buttonClick=this.proall.track_button_click,this.mockLog=this.proall.mock_log)},submitForm(){this.dataTime||(this.dataTime=[]);const t=this.dataTime[0],e=this.dataTime[1];this.getProInfo(t,e)}},computed:{...(0,it.rn)(["pro"])},created(){this.getProInfo()}};const ot=(0,R.Z)(lt,[["render",F],["__scopeId","data-v-e8a4dd4c"]]);var rt=ot}}]);
//# sourceMappingURL=214.9eb8c322.js.map