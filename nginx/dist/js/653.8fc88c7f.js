"use strict";(self["webpackChunkfrontend_web"]=self["webpackChunkfrontend_web"]||[]).push([[653],{97395:function(e,t,l){l.r(t),l.d(t,{default:function(){return ze}});var a=l(73396),o=l(87139),s=l(49242);const n=e=>((0,a.dD)("data-v-1af153fa"),e=e(),(0,a.Cn)(),e),i={style:{"margin-top":"20px"}},d={slot:"footer",class:"dialog-footer"},r={style:{"margin-bottom":"20px","margin-top":"40px","margin-right":"30px","font-size":"14px",color:"#909399"}},c={class:"interface-title"},u={class:"style"},m={slot:"header",class:"card-title"},p={style:{"font-weight":"bold","margin-top":"-9px"}},f={key:0},g={key:1},h={key:2},w={key:3},_={key:4},k={key:5},y={class:"card-url"},b={class:"card-name"},C=n((()=>(0,a._)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1))),W=n((()=>(0,a._)("i",{class:"el-icon-s-flag",style:{"margin-right":"-1px"}},null,-1))),v=n((()=>(0,a._)("i",{class:"el-icon-s-flag",style:{"margin-right":"-1px"}},null,-1))),I=n((()=>(0,a._)("i",{class:"el-icon-s-flag",style:{"margin-right":"-1px"}},null,-1))),x=n((()=>(0,a._)("i",{class:"el-icon-s-flag",style:{"margin-right":"-1px"}},null,-1))),T=n((()=>(0,a._)("b",null,"接口操作记录",-1))),D={style:{"margin-top":"10px"}},V={key:0},U={style:{color:"#409eff","margin-right":"8px"}};function A(e,t,l,n,A,E){const z=(0,a.up)("treeNode"),j=(0,a.up)("el-col"),O=(0,a.up)("el-input"),q=(0,a.up)("el-option"),S=(0,a.up)("el-select"),Y=(0,a.up)("el-button"),$=(0,a.up)("el-form-item"),M=(0,a.up)("el-form"),R=(0,a.up)("el-dialog"),N=(0,a.up)("el-table-column"),P=(0,a.up)("el-tag"),L=(0,a.up)("el-dropdown-item"),H=(0,a.up)("el-dropdown-menu"),K=(0,a.up)("el-dropdown"),J=(0,a.up)("el-card"),B=(0,a.up)("el-table"),Z=(0,a.up)("el-row"),F=(0,a.up)("el-scrollbar"),G=(0,a.up)("addCase"),Q=(0,a.up)("el-drawer"),X=(0,a.up)("newEditCase"),ee=(0,a.up)("el-timeline-item"),te=(0,a.up)("el-timeline"),le=(0,a.up)("interfaceImport");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Z,{gutter:10},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{span:6},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{onTreeClick:E.handleTreeClick,handleTreeClick:E.handleTreeClick},null,8,["onTreeClick","handleTreeClick"])])),_:1}),(0,a.Wm)(j,{span:18},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{gutter:1,style:{"margin-bottom":"20px"}},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("span",null,[(0,a.Wm)(O,{style:{width:"300px","margin-right":"10px"},modelValue:A.filterText.name,"onUpdate:modelValue":t[0]||(t[0]=e=>A.filterText.name=e),placeholder:"请输入接口名称",clearable:""},null,8,["modelValue"]),(0,a.Wm)(S,{modelValue:A.filterText.status,"onUpdate:modelValue":t[1]||(t[1]=e=>A.filterText.status=e),placeholder:"选择查询状态",style:{width:"150px","margin-right":"10px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.options,(e=>((0,a.wg)(),(0,a.j4)(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(Y,{type:"primary",onClick:E.handlenewInterfacesClick},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1},8,["onClick"]),(0,a.Wm)(Y,{onClick:t[2]||(t[2]=e=>A.filterText={status:"",name:""})},{default:(0,a.w5)((()=>[(0,a.Uk)("重置")])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(Y,{type:"danger",style:{"margin-bottom":"20px","margin-top":"40px","margin-right":"10px"},onClick:E.delAllInterface,icon:"el-icon-delete"},{default:(0,a.w5)((()=>[(0,a.Uk)("批量删除 ")])),_:1},8,["onClick"]),(0,a.Wm)(Y,{type:"primary",style:{"margin-bottom":"20px","margin-top":"40px","margin-right":"10px"},onClick:E.clickAdd,icon:"el-icon-plus"},{default:(0,a.w5)((()=>[(0,a.Uk)("新增接口 ")])),_:1},8,["onClick"]),(0,a.Wm)(Y,{type:"primary",style:{"margin-bottom":"20px","margin-top":"40px","margin-right":"10px"},onClick:E.userInterface,icon:"el-icon-view"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(E.buttonText),1)])),_:1},8,["onClick"]),(0,a.Wm)(Y,{type:"primary",style:{"margin-bottom":"20px","margin-top":"40px","margin-right":"10px"},icon:"el-icon-star-off",onClick:t[3]||(t[3]=e=>A.dialogVisible=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)("选择环境 ")])),_:1}),(0,a.Wm)(R,{modelValue:A.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>A.dialogVisible=e),width:"30%",title:"选择环境"},{footer:(0,a.w5)((()=>[(0,a._)("span",d,[(0,a.Wm)(Y,{onClick:t[5]||(t[5]=e=>A.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),(0,a.Wm)(Y,{type:"primary",onClick:E.confirmSelection},{default:(0,a.w5)((()=>[(0,a.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(M,{rules:e.rulesinterface,ref:"interfaceRef"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{label:"测试环境",prop:"env"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{modelValue:A.selectedEnvironment,"onUpdate:modelValue":t[4]||(t[4]=e=>A.selectedEnvironment=e),modelModifiers:{lazy:!0},placeholder:"请选择环境",style:{width:"70%"},"no-data-text":"暂无数据"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.testEnvs,(e=>((0,a.wg)(),(0,a.j4)(q,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["rules"])])),_:1},8,["modelValue"]),(0,a._)("span",r,[(0,a.Uk)("当前环境： "),(0,a.Wm)(Y,{type:"info",disabled:"",plain:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(A.selectedEnvironmentName),1)])),_:1})]),(0,a.Wm)(Y,{type:"warning",style:{"margin-bottom":"20px","margin-top":"40px",float:"right"},icon:"el-icon-upload",onClick:E.importClick},{default:(0,a.w5)((()=>[(0,a.Uk)("导入接口 ")])),_:1},8,["onClick"])]),(0,a._)("div",c,"全部接口共 ("+(0,o.zw)(A.interfaceCount)+") 个",1),(0,a.Wm)(F,{height:"calc(100vh - 210px)"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{"body-style":{width:"calc(100vh + 210px)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{span:24},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{ref:"multipleTable",data:A.tableData,"row-key":"ID","cell-style":{paddingTop:"4px",paddingBottom:"4px"},selectable:A.selectionConfig,onSelectionChange:E.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{type:"selection"}),(0,a.Wm)(N,{align:"center"},{default:(0,a.w5)((e=>[(0,a.Wm)(J,{style:(0,o.j5)(E.getRowClassName(e.row.method)),onClick:t=>E.clickCopy(e.row.id),shadow:"hover"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{span:20},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("span",m,[(0,a._)("div",p,["POST"===e.row.method?((0,a.wg)(),(0,a.iD)("span",f,[(0,a.Wm)(P,{color:"#49cc90",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0),"GET"===e.row.method?((0,a.wg)(),(0,a.iD)("span",g,[(0,a.Wm)(P,{color:"#61affe",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0),"PUT"===e.row.method?((0,a.wg)(),(0,a.iD)("span",h,[(0,a.Wm)(P,{color:"#fca130",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0),"PATCH"===e.row.method?((0,a.wg)(),(0,a.iD)("span",w,[(0,a.Wm)(P,{color:"#50e3c2",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0),"DELETE"===e.row.method?((0,a.wg)(),(0,a.iD)("span",_,[(0,a.Wm)(P,{color:"#f93e3e",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0),"DEAD"===e.row.method?((0,a.wg)(),(0,a.iD)("span",k,[(0,a.Wm)(P,{color:"rgb(201, 233, 104)",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.method),1)])),_:2},1024)])):(0,a.kq)("",!0)]),(0,a._)("b",y,(0,o.zw)(e.row.url),1),(0,a._)("span",b,(0,o.zw)(e.row.name),1)])])])),_:2},1024),(0,a.Wm)(j,{span:4},{default:(0,a.w5)((()=>[(0,a._)("span",{class:"card-content",onClick:t[7]||(t[7]=(0,s.iM)((()=>{}),["stop"]))},[(0,a.Wm)(Y,{type:"text",size:"small",class:"card-button",onClick:t=>E.clickEditStep(e.row.id),style:{"font-weight":"bold"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 调试 ")])),_:2},1032,["onClick"]),(0,a.Wm)(Y,{type:"text",size:"small",class:"card-button",onClick:t=>E.clickCopy(e.row.id),style:{"font-weight":"bold"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 复制 ")])),_:2},1032,["onClick"]),(0,a.Wm)(Y,{type:"text",size:"mini",onClick:t=>E.clickDel(e.row.id),style:{"font-weight":"bold"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 删除 ")])),_:2},1032,["onClick"]),(0,a.Wm)(Y,{type:"text",size:"small",class:"card-button",onClick:E.clickLog,style:{"font-weight":"bold"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 操作记录 ")])),_:1},8,["onClick"]),(0,a.Wm)(K,{style:{"margin-left":"10px"},trigger:"click"},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,a.Wm)(L,{command:"已发布",style:{color:"#67C23A"},onClick:t=>E.statusClick("已发布",e.row.id)},{default:(0,a.w5)((()=>[W,(0,a.Uk)(" 已发布 ")])),_:2},1032,["onClick"]),(0,a.Wm)(L,{command:"测试中",style:{color:"#626aef"},onClick:t=>E.statusClick("测试中",e.row.id)},{default:(0,a.w5)((()=>[v,(0,a.Uk)(" 测试中 ")])),_:2},1032,["onClick"]),(0,a.Wm)(L,{command:"开发中",style:{color:"#E6A23C"},onClick:t=>E.statusClick("开发中",e.row.id)},{default:(0,a.w5)((()=>[I,(0,a.Uk)(" 开发中 ")])),_:2},1032,["onClick"]),(0,a.Wm)(L,{command:"已废弃",style:{color:"#909399"},onClick:t=>E.statusClick("已废弃",e.row.id)},{default:(0,a.w5)((()=>[x,(0,a.Uk)(" 已废弃 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a.Wm)(Y,{type:"text",size:"small",style:(0,o.j5)({color:E.buttonColor(e.row.status)})},{default:(0,a.w5)((()=>["状态"!=e.row.status?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"el-icon-s-flag",style:(0,o.j5)([{"margin-right":"-1px"},{color:E.buttonColor(e.row.status)}])},null,4)):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,o.zw)(e.row.status)+" ",1),C])),_:2},1032,["style"])])),_:2},1024)])])),_:2},1024)])),_:2},1032,["style","onClick"])])),_:1})])),_:1},8,["data","selectable","onSelectionChange"])])),_:1})])),_:1})])),_:1},8,["body-style"])])),_:1})])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(Q,{modelValue:A.addCaseDlg,"onUpdate:modelValue":t[8]||(t[8]=e=>A.addCaseDlg=e),"destroy-on-close":!0,"with-header":!1,size:"50%",onClose:E.handleClose},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{treeId:A.treeId,style:{padding:"0 10px"}},null,8,["treeId"])])),_:1},8,["modelValue","onClose"]),(0,a.Wm)(Q,{modelValue:A.editCaseDlg,"onUpdate:modelValue":t[9]||(t[9]=e=>A.editCaseDlg=e),"destroy-on-close":!0,"with-header":!1,size:"50%",onClose:E.handleClose},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{ref:"childRef",Interface_id:A.Interface_id,copyDlg:A.copyDlg,style:{padding:"0 10px"}},null,8,["Interface_id","copyDlg"])])),_:1},8,["modelValue","onClose"]),(0,a.Wm)(Q,{modelValue:A.logDlg,"onUpdate:modelValue":t[10]||(t[10]=e=>A.logDlg=e),"with-header":!1,size:"50%"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[T,(0,a._)("div",D,[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.bugLogs,((t,l)=>((0,a.wg)(),(0,a.j4)(ee,{key:l,timestamp:e.$tools.rDate(t.create_time),placement:"top",color:"#0bbd87"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a._)("h4",null,(0,o.zw)(t.handle),1),t.remark?((0,a.wg)(),(0,a.iD)("p",V,"变更记录："+(0,o.zw)(t.remark),1)):(0,a.kq)("",!0),(0,a._)("span",U,(0,o.zw)(t.update_user),1),(0,a._)("span",null,"操作于 "+(0,o.zw)(e.$tools.rTime(t.create_time)),1)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})])])),_:1})])),_:1},8,["modelValue"]),A.importDlg?((0,a.wg)(),(0,a.j4)(le,{key:0,importDlg:A.importDlg,onCloseModal:E.handleCloseModal},null,8,["importDlg","onCloseModal"])):(0,a.kq)("",!0)],64)}var E=l(71955),z=l(37046),j=l(94717);const O=e=>((0,a.dD)("data-v-a5a7056c"),e=e(),(0,a.Cn)(),e),q={style:{margin:"10px"},ref:"addCase"},S=O((()=>(0,a._)("b",null,"Api信息",-1))),Y=O((()=>(0,a._)("b",null,"请求信息",-1))),$={key:0},M={key:1},R={key:2},N={class:"code_mod"},P={class:"code_mod"},L={class:"code_mod"},H={class:"code_mod"},K={class:"code_mod"},J={class:"code_mod"},B={class:"code_mod"},Z={class:"code_mod"},F={class:"code_mod"},G={class:"code_mod"},Q={class:"code_mod"},X={class:"code_mod"},ee={class:"code_mod"},te={class:"code_mod"},le={key:0},ae=O((()=>(0,a._)("b",null,"执行结果",-1)));function oe(e,t,l,n,i,d){const r=(0,a.up)("el-divider"),c=(0,a.up)("el-option"),u=(0,a.up)("el-select"),m=(0,a.up)("el-input"),p=(0,a.up)("el-form-item"),f=(0,a.up)("el-col"),g=(0,a.up)("el-button"),h=(0,a.up)("el-row"),w=(0,a.up)("el-cascader"),_=(0,a.up)("el-tag"),k=(0,a.up)("el-scrollbar"),y=(0,a.up)("el-form"),b=(0,a.up)("Editor"),C=(0,a.up)("el-tab-pane"),W=(0,a.up)("el-radio"),v=(0,a.up)("el-radio-group"),I=(0,a.up)("FromData"),x=(0,a.up)("el-tabs"),T=(0,a.up)("caseResult");return(0,a.wg)(),(0,a.j4)(k,{height:"calc(100vh);padding-right:10px;"},{default:(0,a.w5)((()=>[(0,a._)("div",q,[(0,a.Wm)(r,{"content-position":"left",style:{"margin-bottom":"30px"}},{default:(0,a.w5)((()=>[S])),_:1}),(0,a.Wm)(y,{rules:i.rulesinterface,ref:"interfaceRef",model:i.caseInfo},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{gutter:10,style:{"margin-bottom":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{span:18},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{prop:"url"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.caseInfo.url,"onUpdate:modelValue":t[1]||(t[1]=e=>i.caseInfo.url=e),placeholder:"请输入接口地址"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.caseInfo.method,"onUpdate:modelValue":t[0]||(t[0]=e=>i.caseInfo.method=e),placeholder:"请求类型",size:"small",style:{width:"96px",color:"black"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"GET",value:"GET",style:{color:"rgba(204,73,145,0.87)"}}),(0,a.Wm)(c,{label:"POST",value:"POST",style:{color:"#61affe"}}),(0,a.Wm)(c,{label:"PUT",value:"PUT",style:{color:"#fca130"}}),(0,a.Wm)(c,{label:"PATCH",value:"PATCH",style:{color:"#50e3c2"}}),(0,a.Wm)(c,{label:"DELETE",value:"DELETE",style:{color:"#f93e3e"}}),(0,a.Wm)(c,{label:"HEAD",value:"HEAD",style:{color:"rgb(201, 233, 104)"}})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(f,{span:6,style:{"text-align":"right"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{onClick:d.runCase,type:"success",icon:"el-icon-s-promotion"},{default:(0,a.w5)((()=>[(0,a.Uk)("调试")])),_:1},8,["onClick"]),(0,a.Wm)(g,{onClick:d.addClick,type:"primary",icon:"el-icon-edit-outline"},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,a.Wm)(h,{gutter:24,style:{"margin-bottom":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{span:10},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"节点/模块"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:i.caseInfo.treenode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.caseInfo.treenode=e),options:i.options,props:{label:"name",value:"id",checkStrictly:!0},onChange:d.removeCascaderAriaOwns,onVisibleChange:d.removeCascaderAriaOwns,onExpandChange:d.removeCascaderAriaOwns,clearable:"","change-on-select":"",filterable:"",placeholder:"请选择节点/模块"},null,8,["modelValue","options","onChange","onVisibleChange","onExpandChange"])])),_:1})])),_:1}),(0,a.Wm)(f,{span:14},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"接口名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.caseInfo.name,"onUpdate:modelValue":t[3]||(t[3]=e=>i.caseInfo.name=e),placeholder:"请输入接口名称",clearable:"",style:{width:"345px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(f,{span:14},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.caseInfo.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>i.caseInfo.desc=e),type:"textarea",clearable:"",style:{width:"350px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{label:"创建用户:",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a._)("a",null,(0,o.zw)(d.username),1)])),_:1})])),_:1}),(0,a.Wm)(f,{span:10},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{height:"60px"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"接口标签"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.caseInfo.interface_tag,(e=>((0,a.wg)(),(0,a.j4)(_,{key:e,size:"small",type:d.getRandomType(),closable:"","disable-transitions":!1,style:{"margin-right":"5px"},onClose:t=>d.removeTag(e),effect:"light"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e),1)])),_:2},1032,["type","onClose"])))),128)),i.state.editTag?((0,a.wg)(),(0,a.j4)(m,{key:0,ref:"caseTagInputRef",modelValue:i.state.tagValue,"onUpdate:modelValue":t[5]||(t[5]=e=>i.state.tagValue=e),size:"small",onKeyup:(0,s.D2)(d.addTag,["enter"]),onBlur:d.addTag,style:{width:"100px"},maxlength:"30"},null,8,["modelValue","onKeyup","onBlur"])):((0,a.wg)(),(0,a.j4)(g,{key:1,size:"small",onClick:d.showEditTag},{default:(0,a.w5)((()=>[(0,a.Uk)("+ New Tag")])),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"]),(0,a.Wm)(r,{"content-position":"left",style:{"margin-top":"0px"}},{default:(0,a.w5)((()=>[Y])),_:1}),(0,a.Wm)(x,{type:"border-card",style:{"min-height":"370px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{label:"请求头(headers)"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:i.headers,"onUpdate:modelValue":t[6]||(t[6]=e=>i.headers=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"查询参数(Params)"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:i.params,"onUpdate:modelValue":t[7]||(t[7]=e=>i.params=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"请求体(Body)"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:i.paramType,"onUpdate:modelValue":t[8]||(t[8]=e=>i.paramType=e),style:{"margin-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{label:"json"},{default:(0,a.w5)((()=>[(0,a.Uk)("application/json")])),_:1}),(0,a.Wm)(W,{label:"data"},{default:(0,a.w5)((()=>[(0,a.Uk)("x-www-form-urlencoded")])),_:1}),(0,a.Wm)(W,{label:"formData"},{default:(0,a.w5)((()=>[(0,a.Uk)("form-data")])),_:1})])),_:1},8,["modelValue"]),"json"===i.paramType?((0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(b,{modelValue:i.json,"onUpdate:modelValue":t[9]||(t[9]=e=>i.json=e)},null,8,["modelValue"])])):"data"===i.paramType?((0,a.wg)(),(0,a.iD)("div",M,[(0,a.Wm)(b,{modelValue:i.data,"onUpdate:modelValue":t[10]||(t[10]=e=>i.data=e)},null,8,["modelValue"])])):"formData"===i.paramType?((0,a.wg)(),(0,a.iD)("div",R,[(0,a.Wm)(I,{modelValue:i.file,"onUpdate:modelValue":t[11]||(t[11]=e=>i.file=e)},null,8,["modelValue"])])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(C,{label:"前置脚本"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{gutter:10},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{span:18},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:i.caseInfo.setup_script,"onUpdate:modelValue":t[12]||(t[12]=e=>i.caseInfo.setup_script=e),lang:"python",theme:"monokai"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{span:6},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{width:"195px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("脚本模板")])),_:1}),(0,a._)("div",N,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[13]||(t[13]=e=>d.addSetUptCodeMod("ENV"))},{default:(0,a.w5)((()=>[(0,a.Uk)("预设全局变量")])),_:1})]),(0,a._)("div",P,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[14]||(t[14]=e=>d.addSetUptCodeMod("env"))},{default:(0,a.w5)((()=>[(0,a.Uk)("预设局部变量")])),_:1})]),(0,a._)("div",L,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[15]||(t[15]=e=>d.addSetUptCodeMod("func"))},{default:(0,a.w5)((()=>[(0,a.Uk)("调用全局函数")])),_:1})]),(0,a._)("div",H,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[16]||(t[16]=e=>d.addSetUptCodeMod("sql"))},{default:(0,a.w5)((()=>[(0,a.Uk)("执行sql查询")])),_:1})])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(C,{label:"后置脚本"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{gutter:10},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{span:18},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:i.caseInfo.teardown_script,"onUpdate:modelValue":t[17]||(t[17]=e=>i.caseInfo.teardown_script=e),lang:"python",theme:"monokai"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{span:6},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{width:"195px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("脚本模板")])),_:1}),(0,a.Wm)(k,{height:"250px"},{default:(0,a.w5)((()=>[(0,a._)("div",K,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[18]||(t[18]=e=>d.addTearDownCodeMod("getBody"))},{default:(0,a.w5)((()=>[(0,a.Uk)("获取响应体")])),_:1})]),(0,a._)("div",J,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[19]||(t[19]=e=>d.addTearDownCodeMod("JSextract"))},{default:(0,a.w5)((()=>[(0,a.Uk)("jsonpath提取数据")])),_:1})]),(0,a._)("div",B,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[20]||(t[20]=e=>d.addTearDownCodeMod("REextract"))},{default:(0,a.w5)((()=>[(0,a.Uk)("正则提取数据")])),_:1})]),(0,a._)("div",Z,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[21]||(t[21]=e=>d.addTearDownCodeMod("ENV"))},{default:(0,a.w5)((()=>[(0,a.Uk)("设置全局变量")])),_:1})]),(0,a._)("div",F,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[22]||(t[22]=e=>d.addTearDownCodeMod("env"))},{default:(0,a.w5)((()=>[(0,a.Uk)("设置局部变量")])),_:1})]),(0,a._)("div",G,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[23]||(t[23]=e=>d.addTearDownCodeMod("func"))},{default:(0,a.w5)((()=>[(0,a.Uk)("调用全局函数")])),_:1})]),(0,a._)("div",Q,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[24]||(t[24]=e=>d.addTearDownCodeMod("sql"))},{default:(0,a.w5)((()=>[(0,a.Uk)("执行sql查询")])),_:1})]),(0,a._)("div",X,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[25]||(t[25]=e=>d.addTearDownCodeMod("http"))},{default:(0,a.w5)((()=>[(0,a.Uk)("断言HTTP状态码")])),_:1})]),(0,a._)("div",ee,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[26]||(t[26]=e=>d.addTearDownCodeMod("eq"))},{default:(0,a.w5)((()=>[(0,a.Uk)("断言相对")])),_:1})]),(0,a._)("div",te,[(0,a.Wm)(g,{type:"success",size:"mini",plain:"",onClick:t[27]||(t[27]=e=>d.addTearDownCodeMod("contain"))},{default:(0,a.w5)((()=>[(0,a.Uk)("断言包含")])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i.runResult?((0,a.wg)(),(0,a.iD)("div",le,[(0,a.Wm)(r,{"content-position":"left"},{default:(0,a.w5)((()=>[ae])),_:1}),(0,a.Wm)(T,{result:i.runResult},null,8,["result"])])):(0,a.kq)("",!0)],512)])),_:1})}l(70560);var se=l(81578),ne=l(93541),ie=l(62669),de=l(20065),re={props:["treeId"],components:{caseResult:se.Z,FromData:ne.Z,Editor:ie.Z},data(){return{rulesinterface:{name:[{required:!0,message:"请输入接口名称",trigger:"blur"}],url:[{required:!0,message:"请输入接口信息",trigger:"blur"}]},addForm:{},state:{form:{item:[{type:""},{type:"success"},{type:"info"},{type:"danger"},{type:"warning"}]},editTag:!1,tagValue:""},options:[],caseInfo:{method:"POST",interface_tag:[],url:"",name:"",treenode:this.treeId,creator:"",modifier:"",desc:"",headers:{},request:{json:{},data:null,params:{}},file:[],setup_script:"# 前置脚本(python):\n# global_tools:全局工具函数\n# data:用例数据 \n# env: 局部环境\n# ENV: 全局环境\n# db: 数据库操作对象",teardown_script:"# 后置脚本(python):\n# global_tools:全局工具函数\n# data:用例数据 \n# response:响应对象response \n# env: 局部环境\n# ENV: 全局环境\n# db: 数据库操作对象"},paramType:"json",json:"{}",data:"{}",params:"{}",headers:"{}",interfaceparams:"{}",file:[],runResult:""}},computed:{...(0,de.rn)(["pro","envId"]),username(){return window.sessionStorage.getItem("username")}},methods:{focusInput(){this.$nextTick((()=>{this.$refs.caseTagInputRef.focus()}))},addTag(){this.state.editTag&&this.state.tagValue&&(this.caseInfo.interface_tag||(this.caseInfo.interface_tag=[]),this.caseInfo.interface_tag.push(this.state.tagValue),this.focusInput()),this.state.editTag=!1,this.state.tagValue=""},removeTag(e){this.caseInfo.interface_tag.splice(this.caseInfo.interface_tag.indexOf(e),1)},showEditTag(){this.state.editTag=!0,this.focusInput()},getRandomType(){const e=Math.floor(Math.random()*this.state.form.item.length);return this.state.form.item[e].type},async allTree(){const e=await this.$api.gettreeNode();200===e.status&&(this.options=e.data.result)},removeCascaderAriaOwns(){this.$nextTick((()=>{const e=document.querySelectorAll(".el-cascader-panel .el-cascader-node[aria-owns]");Array.from(e).map((e=>e.removeAttribute("aria-owns")))}))},addSetUptCodeMod(e){switch(e){case"ENV":this.caseInfo.setup_script+='\n# 设置全局变量 \ntest.save_global_variable("变量名","变量值")';break;case"env":this.caseInfo.setup_script+='\n# 设置局部变量  \ntest.save_env_variable("变量名","变量值")';break;case"func":this.caseInfo.setup_script+="\n# 调用全局工具函数random_mobile随机生成一个手机号码  \nmobile = global_func.random_mobile()";break;case"sql":this.caseInfo.setup_script+='\n# ----执行sql语句(需要在环境中配置数据库连接信息)----\n# db.连接名.execute_all(sql语句) \nsql = "SELECT count(*) as count FROM futureloan.member"\nres = db.aliyun.execute_all(sql)';break}},addTearDownCodeMod(e){switch(e){case"getBody":this.caseInfo.teardown_script+="\n# Demo:获取响应体(json)  \nbody = response.json()",this.caseInfo.teardown_script+="\n# Demo2:获取响应体(字符串)  \nbody = response.text";break;case"JSextract":this.caseInfo.teardown_script+='\n# Demo:jsonpath提取response中的msg字段  \nmsg = test.json_extract(response.json(),"$..msg")';break;case"REextract":this.caseInfo.teardown_script+='\n# Demo:正则提取响应体中的数据  \nres = test.re_extract(response.text,"正则表达式",)';break;case"ENV":this.caseInfo.teardown_script+='\n# 设置全局变量 \ntest.save_global_variable("变量名","变量值")';break;case"env":this.caseInfo.teardown_script+='\n# 设置局部变量  \ntest.save_env_variable("变量名","变量值")';break;case"func":this.caseInfo.teardown_script+="\n# 调用全局工具函数random_mobile随机生成一个手机号码  \nmobile = global_func.random_mobile()";break;case"sql":this.caseInfo.teardown_script+='\n# ----执行sql语句(需要在环境中配置数据库连接信息)----\n# db.连接名.execute_all(sql语句) \nsql = "SELECT count(*) as count FROM futureloan.member"\nres = db.aliyun.execute_all(sql)';break;case"http":this.caseInfo.teardown_script+='\n# 断言http状态码 \n# Demo:断言http状态码是否为200  \ntest.assertion("相等",200,response.status_code)';break;case"eq":this.caseInfo.teardown_script+='\n# 断言相等 \ntest.assertion("相等","预期结果","实际结果")';break;case"contain":this.caseInfo.teardown_script+='\n# 断言包含:预期结果中的内容在实际结果中是否存在 \ntest.assertion("包含","预期结果","实际结果")';break}},getEditData(){let e={...this.caseInfo};if(e.project=this.pro.id,e.treenode&&e.treenode.length>0){const t=e.treenode[e.treenode.length-1];console.log(t),e.treenode=t}else console.log("列表为空");e.interface_tag={tag:[...e.interface_tag]},e.creator=this.username;try{e.headers=JSON.parse(this.headers)}catch(t){return this.$message({message:"提交的headers数据 json格式错误，请检查！",type:"warning",duration:1e3}),null}if("json"===this.paramType)try{e.request={json:JSON.parse(this.json)},e.request.data=null,e.file=[]}catch(t){return this.$message({message:"提交的application/json数据json格式错误，请检查！",type:"warning",duration:1e3}),null}else if("data"===this.paramType)try{e.request={data:JSON.parse(this.data)},e.request.json=null,e.file=[]}catch(t){return this.$message({message:"提交的x-www-form-urlencoded数据json格式错误，请检查！",type:"warning",duration:1e3}),null}else"formData"===this.paramType&&(e.file=this.file,e.request={});try{return e.request.params=JSON.parse(this.params),e}catch(t){return this.$message({message:"提交的Params数据json格式错误，请检查！",type:"warning",duration:1e3}),null}},async addClick(){this.$refs.interfaceRef.validate((async e=>{if(!e)return;const t=this.getEditData();console.log("新增的参数：",t);const l=await this.$api.createnewInterface(t);201===l.status&&(0,z.z8)({type:"success",message:"添加成功",duration:1e3}),this.$emit("closeDrawer")}))},async runCase(){this.envId?this.$refs.interfaceRef.validate((async e=>{if(!e)return;const t=this.getEditData();t.interface={url:this.caseInfo.url,method:this.caseInfo.method};const l={data:t,env:this.envId},a=await this.$api.runNewCase(l);200===a.status&&(this.runResult=a.data,(0,z.z8)({type:"success",message:"执行完毕",duration:1e3}))})):this.$message({type:"warning",message:"当前未选中执行环境!",duration:1e3})}},created(){this.allTree()}},ce=l(40089);const ue=(0,ce.Z)(re,[["render",oe],["__scopeId","data-v-a5a7056c"]]);var me=ue;const pe=e=>((0,a.dD)("data-v-eeb6bd1a"),e=e(),(0,a.Cn)(),e),fe={key:0},ge={class:"help-box"},he={style:{display:"flex","justify-content":"center","align-items":"center"}},we=pe((()=>(0,a._)("i",{class:"el-icon-upload"},null,-1))),_e=pe((()=>(0,a._)("div",{class:"el-upload__text"},[(0,a.Uk)("将文件拖到此处，或 "),(0,a._)("em",null,"点击上传")],-1))),ke={key:1},ye={class:"help-box"},be={key:0},Ce={key:1},We=pe((()=>(0,a._)("div",{class:"help-warning"}," 因与定时任务功能入口重复，请移至定时任务功能入口进行自动同步 ",-1))),ve=[We],Ie={slot:"footer",class:"dialog-footer"};function xe(e,t,l,s,n,i){const d=(0,a.up)("icon"),r=(0,a.up)("el-check-tag"),c=(0,a.up)("el-tag"),u=(0,a.up)("el-upload"),m=(0,a.up)("el-input"),p=(0,a.up)("el-form-item"),f=(0,a.up)("el-cascader"),g=(0,a.up)("el-form"),h=(0,a.up)("el-button"),w=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(w,{modelValue:n.importDlg,"onUpdate:modelValue":t[6]||(t[6]=e=>n.importDlg=e),title:"导入接口",width:"60%","before-close":i.clickClear,"custom-class":"class_dialog",top:"50px"},{footer:(0,a.w5)((()=>[(0,a._)("span",Ie,[(0,a.Wm)(h,{onClick:i.clickClear},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"]),(0,a.Wm)(h,{type:"primary",loading:n.isLoading,onClick:t[5]||(t[5]=e=>i.importClick(n.selectedOption))},{default:(0,a.w5)((()=>[(0,a.Uk)("导入")])),_:1},8,["loading"])])])),default:(0,a.w5)((()=>[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.options,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{key:t,class:(0,o.C_)([{selected:n.selectedOption===e.value},"option"]),onClick:t=>i.selectOption(e.value)},{default:(0,a.w5)((()=>[(0,a._)("i",null,[(0,a.Wm)(d,{icon:e.icon,class:"importIcon"},null,8,["icon"])]),(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["class","onClick"])))),128))]),"Postman"===n.selectedOption?((0,a.wg)(),(0,a.iD)("div",fe,[(0,a._)("div",ge,[(0,a.Uk)(" 支持导入 "),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Postman")])),_:1}),(0,a.Uk)(" 集合、环境、全局数据。 ")]),(0,a._)("div",he,[(0,a.Wm)(u,{"file-list":n.fileList,"onUpdate:fileList":t[0]||(t[0]=e=>n.fileList=e),drag:"",action:"http://127.0.0.1:8001/upload/",multiple:"",onOnChange:i.handleChange},{default:(0,a.w5)((()=>[we,_e])),_:1},8,["file-list","onOnChange"])])])):(0,a.kq)("",!0),"YApi"===n.selectedOption?((0,a.wg)(),(0,a.iD)("div",ke,[(0,a._)("div",ye,[(0,a.Uk)(" 支持手动、自动导入 "),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)("YApi")])),_:1}),(0,a.Uk)(" 平台的接口数据。 ")]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.optionYApi,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{key:t,class:(0,o.C_)([{selectedYApi:n.selectedOptionYApi===e.value},"optionYApi"]),onClick:t=>i.selectOptionYApi(e.value)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["class","onClick"])))),128))]),0===n.selectedOptionYApi?((0,a.wg)(),(0,a.iD)("div",be,[(0,a.Wm)(g,{inline:!0,model:n.formInline,class:"demo-form-inline",rules:n.rulesYApi,ref:"YApiRef"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:"平台地址",prop:"url"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.formInline.url,"onUpdate:modelValue":t[1]||(t[1]=e=>n.formInline.url=e),placeholder:"请输入YApi平台项目地址",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{label:"平台TOKEN",prop:"token"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.formInline.token,"onUpdate:modelValue":t[2]||(t[2]=e=>n.formInline.token=e),placeholder:"请输入YApi平台项目token",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{label:"平台项目ID",prop:"YApiId"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.formInline.YApiId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.formInline.YApiId=e),placeholder:"请输入YApi平台项目id",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{label:"节点/模块",prop:"treenode"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:n.formInline.treenode,"onUpdate:modelValue":t[4]||(t[4]=e=>n.formInline.treenode=e),options:n.treeOptions,props:{label:"name",value:"id",checkStrictly:!0},onChange:i.removeCascaderAriaOwns,onVisibleChange:i.removeCascaderAriaOwns,onExpandChange:i.removeCascaderAriaOwns,clearable:"","change-on-select":"",filterable:"",placeholder:"请选择节点/模块"},null,8,["modelValue","options","onChange","onVisibleChange","onExpandChange"])])),_:1})])),_:1},8,["model","rules"])])):((0,a.wg)(),(0,a.iD)("div",Ce,ve))])):(0,a.kq)("",!0)])),_:1},8,["modelValue","before-close"])}var Te=l(76088),De={components:{Icon:Te.JO},props:["importDlg"],data(){return{isLoading:!1,importDlg:this.importDlg,selectedOption:"Postman",selectedOptionYApi:0,rulesYApi:{url:[{required:!0,message:"请输入YApi平台项目地址",trigger:"blur"}],token:[{required:!0,message:"请输入YApi平台项目token",trigger:"blur"}],YApiId:[{required:!0,message:"请输入YApi平台项目id",trigger:"blur"}],treenode:[{required:!0,message:"请选择节点/模块",trigger:"blur"}]},options:[{value:"Postman",label:"Postman",icon:"devicon:postman"},{value:"Apipost",label:"Apipost",icon:"logos:appcircle-icon"},{value:"Curl",label:"Curl",icon:"logos:codio"},{value:"Swagger",label:"Swagger",icon:"vscode-icons:file-type-swagger"},{value:"Js fetch",label:"Js fetch",icon:"logos:nodejs-icon"},{value:"YApi",label:"YApi",icon:"logos:yii"}],optionYApi:[{value:0,label:"手动同步"},{value:1,label:"自动同步"}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],formInline:{token:"069a46f10333f6923285d9d312c0c912f2db0286b99c3a8ae3544fca38eb1f54",YApiId:17139,treenode:"",format:"list",project:"",url:"http://api.doc.jiyou-tech.com"},treeOptions:[]}},computed:{...(0,de.rn)(["pro"])},methods:{closeModal(){this.$emit("close-modal")},clickClear(){this.closeModal()},importClick(e){"YApi"===e&&this.getYApiImport()},selectOption(e){this.selectedOption=e},selectOptionYApi(e){this.selectedOptionYApi=e},handleChange(e,t){this.fileList=this.fileList.slice(-3)},removeCascaderAriaOwns(){this.$nextTick((()=>{const e=document.querySelectorAll(".el-cascader-panel .el-cascader-node[aria-owns]");Array.from(e).map((e=>e.removeAttribute("aria-owns")))}))},async getYApiImport(){this.$refs.YApiRef.validate((async e=>{if(!e)return;this.isLoading=!0;let t={...this.formInline};if(t.project=this.pro.id,t.treenode&&t.treenode.length>0){const e=t.treenode[t.treenode.length-1];t.treenode=e}const l=await this.$api.getYApiImport(t);201===l.status&&((0,z.z8)({type:"success",message:"导入成功",duration:1e3}),this.closeModal()),this.isLoading=!1}))},async allTree(){const e=await this.$api.gettreeNode();200===e.status&&(this.treeOptions=e.data.result)}},created(){this.allTree()}};const Ve=(0,ce.Z)(De,[["render",xe],["__scopeId","data-v-eeb6bd1a"]]);var Ue=Ve,Ae={components:{treeNode:E.Z,newEditCase:j.Z,addCase:me,interfaceImport:Ue},computed:{buttonText(){return this.showOnlySelf?"取消只看自己创建":"只看自己创建"},...(0,de.rn)(["pro","testEnvs","envId"]),username(){return window.sessionStorage.getItem("username")},env:{get(){return this.envId},set(e){this.selectEnv(e)}}},data(){return{treeId:"",filterText:{name:"",status:""},tableData:[],editCaseDlg:!1,addCaseDlg:!1,logDlg:!1,importDlg:!1,Interface_id:"",copyDlg:!1,showOnlySelf:!1,selectedOption:"",dialogVisible:!1,selectedEnvironment:"",selectedEnvironmentName:"暂未选择",selectionConfig:{selectedRowKeys:[],selectionChange:this.handleSelectionChange},bugLogs:[{create_time:"2024-02-18T10:30:00",handle:"修复了一个bug",remark:"这是修复bug的备注",update_user:"张三"},{create_time:"2024-02-17T14:20:00",handle:"重新测试了bug",remark:"接口名称登录变更为tms登录接口",update_user:"李四"},{create_time:"2024-02-16T09:45:00",handle:"提交了一个新的bug",update_user:"王五"}],interfaceCount:0,options:[{value:"开发中",label:"开发中"},{value:"测试中",label:"测试中"},{value:"已发布",label:"已发布"},{value:"已废弃",label:"已废弃"}]}},methods:{...(0,de.OI)(["selectEnv"]),handleSelectionChange(e){this.selectionConfig.selectedRowKeys=e.map((e=>e.id))},getRowClassName(e){switch(e){case"GET":return"--el-card-border-color:#61affe";case"POST":return"--el-card-border-color:#49cc90";case"PUT":return"--el-card-border-color:#49cc90";case"DELETE":return"--el-card-border-color:#f93e3e";case"PATCH":return"--el-card-border-color:#50e3c2";default:return""}},async handleTreeClick(e,t,l){if(t){let l=t.name,a=t.status;const o=await this.$api.getnewInterfaces(e,l,a);200===o.status&&(this.treeId=e,this.tableData=o.data,this.interfaceCount=o.data.length)}else if(l){let a=t.name,o=t.status;const s=await this.$api.getnewInterfaces(e,a,o,l);200===s.status&&(this.treeId=e,this.tableData=s.data,this.interfaceCount=s.data.length)}else{const t=await this.$api.getnewInterfaces(e);200===t.status&&(this.treeId=e,this.tableData=t.data,this.interfaceCount=t.data.length)}},async delInterface(e){const t=await this.$api.delnewInterface(e);204===t.status&&((0,z.z8)({type:"success",message:"删除成功",duration:1e3}),this.handleTreeClick(this.treeId),this.filterText={status:"",name:""},this.$refs.multipleTable.clearSelection())},async delAllInterface(){if(0===this.selectionConfig.selectedRowKeys.length)return void(0,z.z8)({type:"warning",message:"请勾选数据后再操作！",duration:2e3});const e={item_ids:this.selectionConfig.selectedRowKeys},t=await this.$api.delAllnewInterface(e);200===t.status&&((0,z.z8)({type:"success",message:"删除成功",duration:1e3}),this.handleTreeClick(this.treeId),this.filterText={status:"",name:""},this.selectionConfig.selectedRowKeys=[],this.$refs.multipleTable.clearSelection())},handlenewInterfacesClick(){this.handleTreeClick(this.treeId,this.filterText)},clickAdd(){this.addCaseDlg=!0},clickDel(e){z.T$.confirm("确定要删除该接口吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.delInterface(e)})).catch((()=>{(0,z.z8)({type:"info",message:"取消删除",duration:1e3})}))},handleClose(){this.addCaseDlg=!1,this.editCaseDlg=!1,this.copyDlg=!1,this.handleTreeClick(this.treeId)},clickEditStep(e){this.Interface_id=e,this.editCaseDlg=!0,this.$nextTick((()=>{this.$refs.childRef.getInterfaceInfo(this.Interface_id)}))},clickCopy(e){this.copyDlg=!0,this.clickEditStep(e)},clickLog(){this.logDlg=!0},userInterface(){this.showOnlySelf=!this.showOnlySelf,this.showOnlySelf?this.handleTreeClick(this.treeId,"",this.username):this.handleTreeClick(this.treeId)},confirmSelection(){this.env=this.selectedEnvironment,this.selectedEnvironmentName=this.testEnvs.find((e=>e.id===this.selectedEnvironment)).name,this.dialogVisible=!1},importClick(){this.importDlg=!0},handleCloseModal(){this.importDlg=!1,this.handleTreeClick(this.treeId)},buttonColor(e){switch(e){case"已发布":return"#67C23A";case"测试中":return"#626aef";case"开发中":return"#E6A23C";case"已废弃":return"#909399";default:return"#409eff"}},async statusClick(e,t){let l={status:e};const a=await this.$api.updatenewInterface(t,l);200===a.status&&this.handleTreeClick(this.treeId)}}};const Ee=(0,ce.Z)(Ae,[["render",A],["__scopeId","data-v-1af153fa"]]);var ze=Ee}}]);
//# sourceMappingURL=653.8fc88c7f.js.map