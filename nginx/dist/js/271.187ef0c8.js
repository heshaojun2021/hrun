"use strict";(self["webpackChunkfrontend_web"]=self["webpackChunkfrontend_web"]||[]).push([[271],{81578:function(e,t,l){l.d(t,{Z:function(){return q}});var s=l(73396),a=l(49242),r=l(87139);const o={key:0},n={key:0},u={key:1},i={key:0,class:"tab-box-sli"},d={style:{color:"#747474"}},c={key:0},w=(0,s._)("b",null,"General",-1),p=(0,s._)("b",null,"Request Headers",-1),m=(0,s._)("b",null,"Request Payload",-1),f={class:"tab-box-sli"},g={key:4,style:{color:"#d60000"}},h={key:0,style:{color:"#00AA7F"}},_={key:1,style:{color:"#d18d17"}},y={key:2,style:{color:"#ff0000"}},k={key:0,style:{color:"#00AA7F"}},b={key:1,style:{color:"#ff5500"}},W={key:0,style:{"margin-top":"10px",width:"100%","text-align":"center"}},D={class:"dialog-footer"};function v(e,t,l,v,z,U){const x=(0,s.up)("Editor"),C=(0,s.up)("el-tab-pane"),R=(0,s.up)("el-tag"),q=(0,s.up)("el-scrollbar"),V=(0,s.up)("el-collapse-item"),j=(0,s.up)("el-collapse"),F=(0,s.up)("el-tabs"),B=(0,s.up)("el-button"),$=(0,s.up)("el-option"),S=(0,s.up)("el-select"),I=(0,s.up)("el-form-item"),H=(0,s.up)("el-input"),A=(0,s.up)("el-form"),Y=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(F,{"model-value":"rb",style:{"min-height":"300px"},type:"border-card",value:"rb",size:"mini"},{default:(0,s.w5)((()=>["api"==l.result.type?((0,s.wg)(),(0,s.j4)(C,{key:0,label:"响应体",name:"rb"},{default:(0,s.w5)((()=>[l.result.response_header?((0,s.wg)(),(0,s.iD)("div",o,[-1!=l.result.response_header["Content-Type"].search("application/json")?((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(x,{readOnly:!0,modelValue:l.result.response_body,"onUpdate:modelValue":t[0]||(t[0]=e=>l.result.response_body=e),lang:"json",theme:"chrome"},null,8,["modelValue"])])):((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(x,{readOnly:!0,modelValue:l.result.response_body,"onUpdate:modelValue":t[1]||(t[1]=e=>l.result.response_body=e),lang:"html",theme:"chrome",height:"500px"},null,8,["modelValue"])]))])):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(C,{key:1,label:"响应头",name:"rh"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{height:"400px",onWheel:t[2]||(t[2]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[l.result.response_header?((0,s.wg)(),(0,s.iD)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.response_header,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(R,{style:{"margin-top":"3px"},type:"info"},{default:(0,s.w5)((()=>[(0,s._)("b",d,(0,r.zw)(t+" : "),1),(0,s._)("span",null,(0,r.zw)(e),1)])),_:2},1024)])))),256))])):(0,s.kq)("",!0)])),_:1})])),_:1})):(0,s.kq)("",!0),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(C,{key:2,label:"请求信息",name:"rq"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{height:"400px",onWheel:t[4]||(t[4]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[l.result.requests_body?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(j,{modelValue:z.activeNames,"onUpdate:modelValue":t[3]||(t[3]=e=>z.activeNames=e),class:"tab-box-sli"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{name:"1"},{title:(0,s.w5)((()=>[w])),default:(0,s.w5)((()=>[(0,s._)("div",null,"Request Method : "+(0,r.zw)(l.result.method),1),(0,s._)("div",null,"Request URL : "+(0,r.zw)(l.result.url),1)])),_:1}),(0,s.Wm)(V,{name:"2"},{title:(0,s.w5)((()=>[p])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.requests_header,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",null,(0,r.zw)(t+" : "+e)+" :",1)])))),256))])),_:1}),(0,s.Wm)(V,{name:"3"},{title:(0,s.w5)((()=>[m])),default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(l.result.requests_body),1)])),_:1})])),_:1},8,["modelValue"])])):(0,s.kq)("",!0)])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(C,{label:"日志"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{height:"400px",onWheel:t[5]||(t[5]=(0,a.iM)((()=>{}),["stop"]))},{default:(0,s.w5)((()=>[(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result.log_data,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,["DEBUG"===e[0]?((0,s.wg)(),(0,s.j4)(R,{key:0,style:{"margin-top":"3px"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e[1]),1)])),_:2},1024)):"WARNING"===e[0]?((0,s.wg)(),(0,s.j4)(R,{key:1,style:{"margin-top":"3px"},type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e[1]),1)])),_:2},1024)):"ERROR"===e[0]?((0,s.wg)(),(0,s.j4)(R,{key:2,style:{"margin-top":"3px"},type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e[1]),1)])),_:2},1024)):"INFO"===e[0]?((0,s.wg)(),(0,s.j4)(R,{key:3,style:{"margin-top":"3px"},type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e[1]),1)])),_:2},1024)):"EXCEPT"===e[0]?((0,s.wg)(),(0,s.iD)("pre",g,(0,r.zw)(e[1]),1)):(0,s.kq)("",!0)])))),256))])])),_:1})])),_:1}),(0,s.Wm)(C,{disabled:""},{label:(0,s.w5)((()=>["成功"===l.result.state?((0,s.wg)(),(0,s.iD)("span",h,(0,r.zw)("Assert : "+l.result.state),1)):"失败"===l.result.state?((0,s.wg)(),(0,s.iD)("span",_,(0,r.zw)("Assert : "+l.result.state),1)):((0,s.wg)(),(0,s.iD)("span",y,(0,r.zw)(l.result.state),1))])),_:1}),"api"==l.result.type?((0,s.wg)(),(0,s.j4)(C,{key:3,disabled:""},{label:(0,s.w5)((()=>[l.result.status_cede<=300?((0,s.wg)(),(0,s.iD)("span",k,(0,r.zw)("Status : "+l.result.status_cede),1)):((0,s.wg)(),(0,s.iD)("span",b,(0,r.zw)("Status : "+l.result.status_cede),1))])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(C,{disabled:""},{label:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)("Time : "+l.result.run_time),1)])),_:1})])),_:1}),"失败"===l.result.state&&l.showbtn?((0,s.wg)(),(0,s.iD)("div",W,[(0,s.Wm)(B,{onClick:U.getInterfaces,type:"success",plain:"",size:"mini"},{default:(0,s.w5)((()=>[(0,s.Uk)("提交bug")])),_:1},8,["onClick"])])):(0,s.kq)("",!0),(0,s.Wm)(Y,{title:"提交bug",modelValue:z.addBugDlg,"onUpdate:modelValue":t[8]||(t[8]=e=>z.addBugDlg=e),width:"40%","before-close":U.closeDialogResult},{footer:(0,s.w5)((()=>[(0,s._)("div",D,[(0,s.Wm)(B,{onClick:U.closeDialogResult},{default:(0,s.w5)((()=>[(0,s.Uk)("取 消")])),_:1},8,["onClick"]),(0,s.Wm)(B,{type:"success",onClick:U.saveBug},{default:(0,s.w5)((()=>[(0,s.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(A,{model:z.bugForm},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{label:"所属接口"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{size:"small",modelValue:z.bugForm.interface,"onUpdate:modelValue":t[6]||(t[6]=e=>z.bugForm.interface=e),placeholder:"bug对应的接口",style:{width:"100%"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.interfaces,(e=>((0,s.wg)(),(0,s.j4)($,{label:e.name+" "+e.url,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(I,{label:"bug描述"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{autosize:{minRows:3,maxRows:4},modelValue:z.bugForm.desc,"onUpdate:modelValue":t[7]||(t[7]=e=>z.bugForm.desc=e),type:"textarea",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"])],64)}var z=l(62669),U=l(20065),x={props:{result:{default:{}},showbtn:{default:!0}},computed:{...(0,U.rn)(["pro"])},components:{Editor:z.Z},data(){return{activeNames:["1","2","3"],addBugDlg:!1,bugForm:{interface:null,desc:"",info:"",status:"待处理"},interfaces:[]}},methods:{async saveBug(){this.bugForm.project=this.pro.id,this.bugForm.info=this.result;const e=await this.$api.createBugs(this.bugForm);201===e.status&&(this.$message({type:"success",message:"bug提交成功",duration:1e3}),this.addBugDlg=!1,this.bugForm={interface:null,desc:"",info:"",status:"待处理"})},closeDialogResult(){this.addBugDlg=!1,this.bugForm={interface:null,desc:"",info:"",status:"待处理"}},async getInterfaces(){const e=await this.$api.getnewInterfaces();200===e.status&&(this.interfaces=e.data,this.addBugDlg=!0)}}},C=l(40089);const R=(0,C.Z)(x,[["render",v]]);var q=R},30630:function(e,t,l){l.r(t),l.d(t,{default:function(){return B}});var s=l(73396),a=l(87139);const r=e=>((0,s.dD)("data-v-212be100"),e=e(),(0,s.Cn)(),e),o={key:0},n=r((()=>(0,s._)("div",{class:"report_title"},[(0,s._)("i",{class:"el-icon-s-marketing"}),(0,s.Uk)(" 测试报告 ")],-1))),u={class:"chartBox",ref:"chart1"},i={class:"chartBox",ref:"chart2"},d={style:{color:"#00aaff"}},c={style:{color:"#00aa7f"}},w={style:{color:"orangered"}},p={style:{color:"#fca130"}},m=r((()=>(0,s._)("b",{style:{"line-height":"30px"}},"未通过场景",-1))),f=r((()=>(0,s._)("b",{style:{"line-height":"30px"}},"通过场景",-1))),g={style:{margin:"5px"}},h={class:"right_box"},_={key:0,class:"title"},y=r((()=>(0,s._)("i",{class:"el-icon-s-help"},null,-1))),k={key:1,class:"title",style:{color:"coral"}},b=r((()=>(0,s._)("i",{class:"el-icon-s-help"},null,-1))),W={key:2,class:"title",style:{color:"red"}},D=r((()=>(0,s._)("i",{class:"el-icon-s-help"},null,-1))),v={key:0},z={key:0},U={key:0,style:{color:"#00AA7F"}},x={key:1,style:{color:"#ffaa00"}},C={key:2,style:{color:"#F56C6C"}};function R(e,t,l,r,R,q){const V=(0,s.up)("el-button"),j=(0,s.up)("el-descriptions-item"),F=(0,s.up)("el-descriptions"),B=(0,s.up)("el-card"),$=(0,s.up)("el-col"),S=(0,s.up)("el-row"),I=(0,s.up)("el-scrollbar"),H=(0,s.up)("caseRes"),A=(0,s.up)("el-table-column"),Y=(0,s.up)("el-table");return R.record?((0,s.wg)(),(0,s.iD)("div",o,[R.report?((0,s.wg)(),(0,s.j4)(S,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)($,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{height:"calc(100vh - 65px)"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(V,{type:"primary",icon:"el-icon-caret-left",onClick:q.goBack},{default:(0,s.w5)((()=>[(0,s.Uk)("返回")])),_:1},8,["onClick"]),n,(0,s.Wm)(F,{column:5,border:"",title:"执行信息",direction:"vertical"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{label:"执行时间"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$tools.rTime(R.record.create_time)),1)])),_:1}),(0,s.Wm)(j,{label:"执行任务"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(R.record.plan_name),1)])),_:1}),(0,s.Wm)(j,{label:"测试环境"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(R.record.env_name),1)])),_:1}),(0,s.Wm)(j,{label:"通过率"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(R.record.pass_rate+"%"),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(B,{"body-style":"padding:5px"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{gutter:5},{default:(0,s.w5)((()=>[(0,s.Wm)($,{span:14},{default:(0,s.w5)((()=>[(0,s._)("div",u,null,512)])),_:1}),(0,s.Wm)($,{span:10},{default:(0,s.w5)((()=>[(0,s._)("div",i,null,512)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(F,{column:4,border:"",title:"测试场景统计",direction:"vertical"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{label:"场景总数"},{default:(0,s.w5)((()=>[(0,s._)("b",d,(0,a.zw)(R.report.results.length),1)])),_:1}),(0,s.Wm)(j,{label:"通过场景"},{default:(0,s.w5)((()=>[(0,s._)("b",c,(0,a.zw)(q.successscent.length),1)])),_:1}),(0,s.Wm)(j,{label:"失败场景"},{default:(0,s.w5)((()=>[(0,s._)("b",w,(0,a.zw)(q.failscent.length),1)])),_:1}),(0,s.Wm)(j,{label:"错误场景"},{default:(0,s.w5)((()=>[(0,s._)("b",p,(0,a.zw)(q.errorscent.length),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[m,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.errorscent,(e=>((0,s.wg)(),(0,s.j4)(V,{plain:"",size:"mini",onClick:t=>R.showScentDatas=[e],type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.name),1)])),_:2},1032,["onClick"])))),256)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.failscent,(e=>((0,s.wg)(),(0,s.j4)(V,{plain:"",size:"mini",onClick:t=>R.showScentDatas=[e],type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.name),1)])),_:2},1032,["onClick"])))),256))])])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[f,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.successscent,(e=>((0,s.wg)(),(0,s.j4)(V,{plain:"",size:"mini",onClick:t=>R.showScentDatas=[e],type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.name),1)])),_:2},1032,["onClick"])))),256))])])),_:1})])),_:1})])),_:1}),(0,s.Wm)($,{span:12},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",g,[(0,s.Wm)(V,{size:"small",type:"primary",plain:"",onClick:t[0]||(t[0]=e=>R.showScentDatas={...R.report.results})},{default:(0,s.w5)((()=>[(0,s.Uk)("所有场景")])),_:1}),(0,s.Wm)(V,{size:"small",type:"success",plain:"",onClick:t[1]||(t[1]=e=>R.showScentDatas=q.successscent)},{default:(0,s.w5)((()=>[(0,s.Uk)("成功场景")])),_:1}),(0,s.Wm)(V,{size:"small",type:"warning",plain:"",onClick:t[2]||(t[2]=e=>R.showScentDatas=q.failscent)},{default:(0,s.w5)((()=>[(0,s.Uk)("失败场景")])),_:1}),(0,s.Wm)(V,{size:"small",type:"danger",plain:"",onClick:t[3]||(t[3]=e=>R.showScentDatas=q.errorscent)},{default:(0,s.w5)((()=>[(0,s.Uk)("错误场景")])),_:1})]),(0,s.Wm)(I,{height:"calc(100vh - 117px)"},{default:(0,s.w5)((()=>[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(R.showScentDatas,((e,t)=>((0,s.wg)(),(0,s.j4)(B,{key:t},{default:(0,s.w5)((()=>["success"==e.state?((0,s.wg)(),(0,s.iD)("div",_,[y,(0,s.Uk)(" "+(0,a.zw)("测试场景 : "+e.name+"【通过】"),1)])):"fail"==e.state?((0,s.wg)(),(0,s.iD)("div",k,[b,(0,s.Uk)(" "+(0,a.zw)("测试场景 : "+e.name+"【失败】"),1)])):((0,s.wg)(),(0,s.iD)("div",W,[D,(0,s.Uk)(" "+(0,a.zw)("测试场景 : "+e.name+"【错误】"),1)])),(0,s.Wm)(Y,{data:e.cases,style:{width:"100%"},class:"result","show-header":!1,"empty-text":"暂无数据"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{type:"expand"},{default:(0,s.w5)((e=>[(0,s.Wm)(H,{result:e.row},null,8,["result"])])),_:1}),(0,s.Wm)(A,{"show-overflow-tooltip":!0,label:"用例名称",prop:"name","min-width":"100px"}),(0,s.Wm)(A,{label:"请求方法",prop:"method"},{default:(0,s.w5)((e=>["api"===e.row.type?((0,s.wg)(),(0,s.iD)("span",v,(0,a.zw)(e.row.method),1)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(A,{label:"响应状态码",prop:"status_cede"},{default:(0,s.w5)((e=>["api"===e.row.type?((0,s.wg)(),(0,s.iD)("span",z,(0,a.zw)(e.row.status_cede),1)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(A,{label:"断言结果",prop:"state","min-width":"40px"},{default:(0,s.w5)((e=>["成功"==e.row.state?((0,s.wg)(),(0,s.iD)("span",U,"成功")):"失败"==e.row.state?((0,s.wg)(),(0,s.iD)("span",x,"失败")):((0,s.wg)(),(0,s.iD)("span",C,"错误"))])),_:1})])),_:2},1032,["data"])])),_:2},1024)))),128))])])),_:1})])])),_:1})])),_:1})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var q=l(81578),V={components:{caseRes:q.Z},data(){return{record:null,report:null,showScentDatas:null}},methods:{goBack(){window.history.back()},async getReportInfo(e){const t=await this.$api.getTestReport(e);200===t.status&&(this.report=t.data.info,this.showScentDatas={...this.report.results})},async getRecordInfo(e){const t=await this.$api.getRecordInfo(e);200===t.status&&(this.record=t.data)},chart1(){const e=[this.report.all,this.report.success,this.report.fail,this.report.error],t=["用例总数","通过用例","失败用例","错误用例"];this.$chart.chart1(this.$refs.chart1,e,t)},chart2(){const e=[{value:this.report.success,name:"通过"},{value:this.report.fail,name:"失败"},{value:this.report.error,name:"错误"}];this.$chart.chart2(this.$refs.chart2,e)}},computed:{successscent(){return this.report.results.filter((function(e,t,l){return"success"===e.state}))},failscent(){return this.report.results.filter((function(e,t,l){return"fail"===e.state}))},errorscent(){return this.report.results.filter((function(e,t,l){return"error"===e.state}))}},async created(){const e=this.$route.params.id;this.getReportInfo(e),this.getRecordInfo(e)},updated(){this.$refs.chart1&&this.chart1(),this.$refs.chart2&&this.chart2()}},j=l(40089);const F=(0,j.Z)(V,[["render",R],["__scopeId","data-v-212be100"]]);var B=F}}]);
//# sourceMappingURL=271.187ef0c8.js.map